# .github/workflows/deploy-ssl.yml
name: Deploy SSL Certificates

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Deploy SSL to Server
      env:
        SSL_KEY: ${{ secrets.SSL_KEY }}
        SSL_PEM: ${{ secrets.SSL_PEM }}
      run: |
        # 1. Crear archivos temporales
        echo "$SSL_KEY" > private.key
        echo "$SSL_PEM" > certificate.pem
        
        # 2. Verificar que son v√°lidos
        openssl rsa -in private.key -check -noout
        openssl x509 -in certificate.pem -text -noout
        
        # 3. Copiar al servidor (ejemplo con SSH)
        chmod 600 private.key
        scp -o StrictHostKeyChecking=no private.key user@tu-servidor:/etc/ssl/private/grouvex.com.key
        scp -o StrictHostKeyChecking=no certificate.pem user@tu-servidor:/etc/ssl/certs/grouvex.com.pem
        
        # 4. Limpiar localmente
        rm -f private.key certificate.pem
