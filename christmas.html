<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Calendario de Adviento M√°gico - Grouvex Studios</title>
    <meta name="description" content="Celebra Navidad, A√±o Nuevo y Reyes magos con nuestro calendario de adviento interactivo">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --primary-color: #1a472a;
            --secondary-color: #2e8b57;
            --accent-color: #ff6b6b;
            --gold-color: #ffd700;
            --light-color: #f8f9fa;
            --dark-color: #1a1a2e;
            --blue-color: #4a90e2;
            --purple-color: #9b59b6;
            --red-color: #e74c3c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a472a, #2e8b57);
            color: var(--light-color);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
            transition: all 1s ease;
        }

        /* Fondos especiales */
        body.christmas-theme {
            background: linear-gradient(135deg, #b30000, #1a472a);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 215, 0, 0.3) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 215, 0, 0.3) 0%, transparent 20%),
                radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
        }

        body.newyear-theme {
            background: linear-gradient(135deg, #000428, #004e92);
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 215, 0, 0.3) 0%, transparent 50%);
            animation: sparkle 3s infinite alternate;
        }

        body.reyes-theme {
            background: linear-gradient(135deg, #8B4513, #D2691E, #FFD700);
            background-image: 
                radial-gradient(circle at 30% 30%, rgba(255, 215, 0, 0.4) 0%, transparent 40%),
                radial-gradient(circle at 70% 70%, rgba(139, 69, 19, 0.3) 0%, transparent 40%);
        }

        @keyframes sparkle {
            0% { background: linear-gradient(135deg, #000428, #004e92); }
            100% { background: linear-gradient(135deg, #004e92, #000428); }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        header {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.5s ease;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            color: var(--gold-color);
            transition: all 0.5s ease;
        }

        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .utc-notice {
            background: rgba(255, 215, 0, 0.2);
            border: 2px solid var(--gold-color);
            border-radius: 10px;
            padding: 10px;
            margin-top: 10px;
            font-size: 1rem;
        }

        .utc-time {
            font-weight: bold;
            color: var(--gold-color);
        }

        /* Contadores */
        .countdown-container {
            display: none;
            margin: 30px auto;
            max-width: 800px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            transition: all 0.5s ease;
        }

        .countdown-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--gold-color);
        }

        .countdown {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .countdown-item {
            background: linear-gradient(145deg, var(--secondary-color), var(--primary-color));
            border-radius: 10px;
            padding: 15px;
            min-width: 100px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.5s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .countdown-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--gold-color);
            font-family: 'Courier New', monospace;
        }

        .countdown-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .countdown-message {
            font-size: 1.2rem;
            margin-top: 15px;
            color: var(--gold-color);
        }

        /* Efectos de cuenta regresiva */
        .countdown-flash {
            animation: countdownFlash 0.5s ease-in-out;
        }

        @keyframes countdownFlash {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); background: var(--accent-color); }
            100% { transform: scale(1); }
        }

        /* Calendario */
        .calendar-container {
            display: none;
        }

        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            margin-bottom: 30px;
        }

        .calendar-title {
            grid-column: 1 / -1;
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: var(--gold-color);
        }

        .day-label {
            font-weight: bold;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }

        .day {
            aspect-ratio: 1;
            background: linear-gradient(145deg, var(--secondary-color), var(--primary-color));
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            padding: 5px;
        }

        .day:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
        }

        .day-number {
            font-size: 1.8rem;
        }

        .day-content {
            font-size: 0.9rem;
            margin-top: 5px;
            text-align: center;
        }

        .day.opened {
            background: linear-gradient(145deg, var(--gold-color), #ffa500);
            color: var(--dark-color);
            transform: scale(0.95);
        }

        .day.opened::after {
            content: "‚úì";
            position: absolute;
            bottom: 5px;
            right: 5px;
            font-size: 1rem;
            color: var(--dark-color);
        }

        .day.disabled {
            background: linear-gradient(145deg, #555, #333);
            color: #777;
            cursor: not-allowed;
        }

        .day.disabled:hover {
            transform: none;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .day.today {
            border: 3px solid var(--accent-color);
            animation: pulse 2s infinite;
        }

        .day.special {
            background: linear-gradient(145deg, var(--accent-color), #ff5252);
            color: white;
        }

        .day.christmas {
            background: linear-gradient(145deg, var(--gold-color), #ff6b6b);
            color: var(--dark-color);
            animation: christmasGlow 2s infinite alternate;
        }

        .day.new-year {
            background: linear-gradient(145deg, var(--blue-color), var(--purple-color));
            color: white;
            animation: newYearGlow 1.5s infinite alternate;
        }

        .day.reyes {
            background: linear-gradient(145deg, #8B4513, #D2691E, #FFD700);
            color: white;
            animation: reyesGlow 2s infinite alternate;
        }

        @keyframes pulse {
            0% { 
                box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.7);
                transform: scale(1);
            }
            50% { 
                transform: scale(1.05);
            }
            70% { 
                box-shadow: 0 0 0 15px rgba(255, 107, 107, 0);
            }
            100% { 
                box-shadow: 0 0 0 0 rgba(255, 107, 107, 0);
                transform: scale(1);
            }
        }

        @keyframes christmasGlow {
            0% { 
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
                transform: scale(1);
            }
            100% { 
                box-shadow: 0 0 40px rgba(255, 0, 0, 0.8);
                transform: scale(1.05);
            }
        }

        @keyframes newYearGlow {
            0% { 
                box-shadow: 0 0 20px rgba(74, 144, 226, 0.5);
                transform: scale(1);
            }
            100% { 
                box-shadow: 0 0 40px rgba(155, 89, 182, 0.8);
                transform: scale(1.05);
            }
        }

        @keyframes reyesGlow {
            0% { 
                box-shadow: 0 0 20px rgba(139, 69, 19, 0.5);
                transform: scale(1);
            }
            100% { 
                box-shadow: 0 0 40px rgba(255, 215, 0, 0.8);
                transform: scale(1.05);
            }
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: linear-gradient(135deg, var(--light-color), #e9ecef);
            color: var(--dark-color);
            width: 90%;
            max-width: 500px;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            position: relative;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            animation: modalAppear 0.5s ease;
        }

        @keyframes modalAppear {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-color);
        }

        .modal-title {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.8rem;
        }

        .modal-image {
            max-width: 100%;
            max-height: 200px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .modal-audio {
            width: 100%;
            margin: 15px 0;
        }

        .modal-text {
            margin: 15px 0;
            line-height: 1.6;
        }

        /* Copos de nieve */
        .snowflake {
            position: absolute;
            top: -10px;
            color: white;
            font-size: 1rem;
            user-select: none;
            pointer-events: none;
            z-index: -1;
            animation-name: fall;
            animation-timing-function: linear;
            animation-iteration-count: infinite;
        }

        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(360deg);
            }
        }

        /* Controles de m√∫sica */
        .music-controls {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .music-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .music-btn:hover {
            background: #ff5252;
            transform: scale(1.05);
        }

        footer {
            margin-top: 30px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            font-size: 0.9rem;
            transition: all 0.5s ease;
        }

        .audio-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 15px 0;
        }

        .audio-option {
            background: var(--secondary-color);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .audio-option:hover {
            background: var(--primary-color);
        }

        .firework {
            position: absolute;
            width: 5px;
            height: 5px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 100;
        }

        .time-info {
            margin-top: 10px;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .special-message {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            animation: textGlow 2s infinite alternate;
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        @keyframes textGlow {
            0% { 
                text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
                transform: scale(1);
            }
            100% { 
                text-shadow: 0 0 20px rgba(255, 215, 0, 0.8);
                transform: scale(1.05);
            }
        }

        .christmas-message {
            color: #ff6b6b;
            background: rgba(179, 0, 0, 0.3);
            border: 3px solid var(--gold-color);
        }

        .newyear-message {
            color: #4a90e2;
            background: rgba(0, 78, 146, 0.3);
            border: 3px solid #00ffff;
        }

        .reyes-message {
            color: #FFD700;
            background: rgba(139, 69, 19, 0.3);
            border: 3px solid var(--gold-color);
        }

        .countdown-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: var(--gold-color);
            width: 100%;
            transform-origin: left;
            animation: progressBar 1s linear forwards;
        }

        @keyframes progressBar {
            from { transform: scaleX(1); }
            to { transform: scaleX(0); }
        }

        /* Estilos para contadores especiales */
        .special-countdown {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .special-countdown-item {
            background: linear-gradient(145deg, var(--gold-color), #ffa500);
            border-radius: 10px;
            padding: 15px;
            min-width: 80px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            border: 2px solid var(--gold-color);
            position: relative;
            overflow: hidden;
            animation: specialPulse 2s infinite;
        }

        .special-countdown-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--dark-color);
            font-family: 'Courier New', monospace;
        }

        .special-countdown-label {
            font-size: 0.8rem;
            color: var(--dark-color);
            font-weight: bold;
        }

        @keyframes specialPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .countdown-urgent {
            animation: urgentPulse 0.5s infinite alternate;
        }

        @keyframes urgentPulse {
            0% { background: linear-gradient(145deg, var(--gold-color), #ffa500); }
            100% { background: linear-gradient(145deg, #ff6b6b, #ff5252); }
        }

        /* Contador detallado para Navidad y A√±o Nuevo */
        .detailed-countdown {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .detailed-countdown-item {
            background: linear-gradient(145deg, var(--secondary-color), var(--primary-color));
            border-radius: 10px;
            padding: 15px;
            min-width: 80px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border: 2px solid var(--gold-color);
        }

        .detailed-countdown-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--gold-color);
            font-family: 'Courier New', monospace;
        }

        .detailed-countdown-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        /* Estilos para cuando quedan 5 d√≠as o menos */
        .urgent-countdown {
            animation: urgentFlash 1s infinite;
            background: linear-gradient(145deg, #ff6b6b, #ff5252) !important;
            border: 2px solid #ffd700 !important;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.7) !important;
        }

        .urgent-countdown .detailed-countdown-number {
            color: white !important;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }

        .urgent-countdown .detailed-countdown-label {
            color: white !important;
            font-weight: bold;
        }

        @keyframes urgentFlash {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <header>
        <a href="https://grouvex.github.io/"> <div class="img-container" loading="lazy"></div></a> 
        <span style="font-family: Times New Roman;color:white;box-shadow: 0 0 10px gold;width:100%">
            <nav>
                <span id="menuG"></span>
                <span id="menuT"></span>
                <span id="menuU"></span>
            </nav>
        </span>
    </header>
    <!-- Anuncio -->
    <div id="news"></div>
 <main>
    <div class="container">
        <header>
            <h1 id="mainTitle">üéÑ Calendario de Adviento M√°gico üéÖ</h1>
            <p class="subtitle" id="mainSubtitle">¬°Abre una sorpresa cada d√≠a hasta Navidad y m√°s all√°!</p>
            <div class="utc-notice">
                ‚ö†Ô∏è <strong>CALENDARIO EN HORARIO UTC</strong> ‚ö†Ô∏è<br>
                Los d√≠as cambian seg√∫n la hora UTC (Tiempo Universal Coordinado)<br>
                <span class="utc-time" id="utcTimeDisplay">Hora UTC actual: calculando...</span>
            </div>
        </header>

        <!-- Mensajes especiales -->
        <div id="specialMessages"></div>

        <!-- Contador hasta el inicio del calendario -->
        <div class="countdown-container" id="countdownToCalendar">
            <h2 class="countdown-title">¬°Pronto comenzar√° la magia navide√±a!</h2>
            <div class="countdown" id="countdownCalendar">
                <div class="countdown-item">
                    <div class="countdown-number" id="daysToCalendar">00</div>
                    <div class="countdown-label">D√≠as</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="hoursToCalendar">00</div>
                    <div class="countdown-label">Horas</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="minutesToCalendar">00</div>
                    <div class="countdown-label">Minutos</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="secondsToCalendar">00</div>
                    <div class="countdown-label">Segundos</div>
                </div>
            </div>
            <p class="countdown-message" id="messageToCalendar">El calendario se activar√° el 1 de diciembre (UTC)</p>
            <div class="time-info" id="localTimeInfo"></div>
        </div>

        <!-- Contador especial para Navidad y A√±o Nuevo -->
        <div class="countdown-container" id="specialCountdownContainer">
            <h2 class="countdown-title" id="specialCountdownTitle">¬°Cuenta atr√°s para las fiestas especiales!</h2>
            <div class="detailed-countdown" id="specialCountdown">
                <!-- Se generar√° din√°micamente -->
            </div>
            <p class="countdown-message" id="specialCountdownMessage">¬°Disfruta de cada d√≠a del calendario!</p>
            <div class="time-info" id="specialTimeInfo"></div>
        </div>

        <!-- Calendario completo de diciembre -->
        <div class="calendar-container" id="calendarContainer">
            <div class="calendar" id="calendar">
                <!-- Los d√≠as se generar√°n con JavaScript -->
            </div>

            <div class="music-controls">
                <button class="music-btn" id="playMusic">
                    <span>üéµ</span> Reproducir M√∫sica Navide√±a
                </button>
                <button class="music-btn" id="stopMusic">
                    <span>üîá</span> Detener M√∫sica
                </button>
            </div>
            <div class="time-info">
                Calendario activo del 1/12 al 7/01. D√≠a actual (UTC): <span id="currentUTCDay"></span>
            </div>
        </div>

        <footer id="mainFooter">
            <p>Disfruta de cada d√≠a con una sorpresa √∫nica. ¬°Felices fiestas! üéÅ</p>
        </footer>
    </div>

    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <h2 class="modal-title" id="modalTitle">D√≠a 1</h2>
            <div id="modalContent">
                <!-- El contenido espec√≠fico del d√≠a se cargar√° aqu√≠ -->
            </div>
        </div>
    </div>

    <script>
        // URLs de m√∫sica desde tu repositorio
        const musicBaseURL = "https://raw.githubusercontent.com/Grouvex/grouvex.github.io/main/music/";
        
        // Contenido para cada d√≠a del calendario
        const dailyContent = {
            1: { title: "¬°Feliz 1 de Diciembre! (UTC)", type: "text", content: "¬°Comienza la cuenta atr√°s para Navidad!", text: "Hoy te damos la bienvenida al calendario de adviento." },
            2: { title: "D√≠a 2 - Villancico (UTC)", type: "text", content: "Disfruta de este d√≠a especial", text: "La magia navide√±a est√° en el aire." },
            3: { title: "D√≠a 3 - Chiste Navide√±o (UTC)", type: "text", content: "¬øQu√© le dice un √°rbol a otro √°rbol? ¬°Qu√© hojas de verte!", text: "Esperamos que este chiste te haya sacado una sonrisa." },
            4: { title: "D√≠a 4 - Imagen Festiva (UTC)", type: "text", content: "Un momento m√°gico navide√±o", text: "Disfruta de la belleza de esta √©poca." },
            5: { title: "D√≠a 5 - Canci√≥n Alegre (UTC)", type: "text", content: "La m√∫sica alegra el coraz√≥n", text: "Deja que la m√∫sica navide√±a llene tu d√≠a de alegr√≠a." },
            6: { title: "D√≠a 6 - Acertijo (UTC)", type: "text", content: "¬øQu√© es lo que siempre viene en diciembre pero nunca en enero? La letra D.", text: "¬øAdivinaste el acertijo?" },
            7: { title: "D√≠a 7 - Decoraci√≥n Navide√±a (UTC)", type: "text", content: "Insp√≠rate con la decoraci√≥n", text: "Las decoraciones navide√±as crean un ambiente m√°gico." },
            8: { title: "D√≠a 8 - M√∫sica Relajante (UTC)", type: "text", content: "Un momento de tranquilidad", text: "Disfruta de la calma que trae esta √©poca." },
            9: { title: "D√≠a 9 - Curiosidad Navide√±a (UTC)", type: "text", content: "¬øSab√≠as que la tradici√≥n del √°rbol de Navidad se origin√≥ en Alemania?", text: "Cada tradici√≥n tiene su historia." },
            10: { title: "D√≠a 10 - Paisaje Invernal (UTC)", type: "text", content: "La belleza del invierno", text: "El invierno tiene su propia magia." },
            11: { title: "D√≠a 11 - Villancico Animado (UTC)", type: "text", content: "¬°Es hora de cantar!", text: "Los villancicos son parte esencial de la Navidad." },
            12: { title: "D√≠a 12 - Refr√°n Navide√±o (UTC)", type: "text", content: "Hasta los gatos se visten de gala en Nochebuena.", text: "Los refranes reflejan la sabidur√≠a popular." },
            13: { title: "D√≠a 13 - Luces Navide√±as (UTC)", type: "text", content: "Las luces iluminan la oscuridad", text: "Las luces navide√±as simbolizan esperanza." },
            14: { title: "D√≠a 14 - M√∫sica Cl√°sica (UTC)", type: "text", content: "Disfruta de esta pieza musical", text: "La m√∫sica cl√°sica tiene un lugar especial en Navidad." },
            15: { title: "D√≠a 15 - Dato Curioso (UTC)", type: "text", content: "En Finlandia, la Nochebuena es el d√≠a m√°s importante.", text: "Cada pa√≠s tiene sus propias tradiciones." },
            16: { title: "D√≠a 16 - Regalos Navide√±os (UTC)", type: "text", content: "El arte de dar", text: "Los regalos son s√≠mbolos de amor y aprecio." },
            17: { title: "D√≠a 17 - Canci√≥n Festiva (UTC)", type: "text", content: "Celebra con alegr√≠a", text: "La m√∫sica festiva anima cualquier celebraci√≥n." },
            18: { title: "D√≠a 18 - Pensamiento Navide√±o (UTC)", type: "text", content: "La Navidad es un estado de la mente.", text: "El verdadero esp√≠ritu navide√±o est√° en nuestro interior." },
            19: { title: "D√≠a 19 - Comida Navide√±a (UTC)", type: "text", content: "Sabores de Navidad", text: "La comida une a las familias en estas fechas." },
            20: { title: "D√≠a 20 - Villancico Tradicional (UTC)", type: "text", content: "Tradiciones que perduran", text: "Los villancicos tradicionales conectan generaciones." },
            21: { title: "D√≠a 21 - Cita Navide√±a (UTC)", type: "text", content: "La mejor manera de spreadir el esp√≠ritu navide√±o es cantando.", text: "- El Grinch" },
            22: { title: "D√≠a 22 - Decoraci√≥n Creativa (UTC)", type: "text", content: "Creatividad navide√±a", text: "La decoraci√≥n expresa nuestro esp√≠ritu festivo." },
            23: { title: "D√≠a 23 - M√∫sica para Celebrar (UTC)", type: "text", content: "√öltimos preparativos", text: "La cuenta atr√°s est√° casi terminada." },
            24: { title: "¬°Nochebuena! (UTC)", type: "text", content: "¬°Feliz Nochebuena!", text: "Que esta noche est√© llena de magia y alegr√≠a." },
            25: { title: "¬°Feliz Navidad! (UTC)", type: "text", content: "üéÑ ¬°Feliz Navidad! üéÖ", text: "Que este d√≠a est√© lleno de amor y momentos especiales." },
            26: { title: "D√≠a 26 - D√≠a de San Esteban (UTC)", type: "text", content: "D√≠a para descansar", text: "Disfruta de la tranquilidad despu√©s de la celebraci√≥n." },
            27: { title: "D√≠a 27 - Preparando el A√±o Nuevo (UTC)", type: "text", content: "Preparativos para el nuevo ciclo", text: "El a√±o nuevo se acerca." },
            28: { title: "D√≠a 28 - Prop√≥sitos (UTC)", type: "text", content: "Reflexiona sobre tus metas", text: "Es un buen momento para pensar en el futuro." },
            29: { title: "D√≠a 29 - Despedida (UTC)", type: "text", content: "Despidiendo el a√±o", text: "Prepar√©monos para dar la bienvenida a lo nuevo." },
            30: { title: "D√≠a 30 - √öltimo d√≠a del a√±o (UTC)", type: "text", content: "¬°Ma√±ana es Nochevieja!", text: "Prep√°rate para despedir el a√±o." },
            31: { title: "¬°Feliz A√±o Nuevo! (UTC)", type: "text", content: "üéÜ ¬°Feliz A√±o Nuevo! üéá", text: "Que el pr√≥ximo a√±o est√© lleno de bendiciones." },
            "1.1": { title: "¬°Feliz A√±o Nuevo 2025! (UTC)", type: "text", content: "üéâ ¬°Feliz A√±o Nuevo! üéä", text: "¬°Que todos tus deseos se cumplan!" },
            "2.1": { title: "2 de Enero (UTC)", type: "text", content: "Seguimos disfrutando", text: "Aprovecha estos d√≠as de descanso." },
            "3.1": { title: "3 de Enero (UTC)", type: "text", content: "Preparando la llegada de los Reyes", text: "La emoci√≥n contin√∫a." },
            "4.1": { title: "4 de Enero (UTC)", type: "text", content: "Faltan pocos d√≠as para Reyes", text: "La expectativa crece." },
            "5.1": { title: "5 de Enero (UTC)", type: "text", content: "¬°Noche de Reyes!", text: "Esta noche es m√°gica para los m√°s peque√±os." },
            "6.1": { title: "¬°Feliz D√≠a de Reyes! (UTC)", type: "text", content: "üéÅ ¬°Feliz D√≠a de Reyes! üëë", text: "Que los Reyes Magos te traigan alegr√≠a." },
            "7.1": { title: "√öltimo d√≠a del calendario (UTC)", type: "text", content: "Fin de las fiestas", text: "Esperamos que hayas disfrutado del calendario." }
        };

        // Elementos DOM
        const calendarEl = document.getElementById('calendar');
        const modalEl = document.getElementById('modal');
        const modalTitleEl = document.getElementById('modalTitle');
        const modalContentEl = document.getElementById('modalContent');
        const closeModalEl = document.getElementById('closeModal');
        const playMusicBtn = document.getElementById('playMusic');
        const stopMusicBtn = document.getElementById('stopMusic');
        const countdownToCalendarEl = document.getElementById('countdownToCalendar');
        const specialCountdownContainerEl = document.getElementById('specialCountdownContainer');
        const specialCountdownEl = document.getElementById('specialCountdown');
        const specialCountdownTitleEl = document.getElementById('specialCountdownTitle');
        const specialCountdownMessageEl = document.getElementById('specialCountdownMessage');
        const calendarContainerEl = document.getElementById('calendarContainer');
        const daysToCalendarEl = document.getElementById('daysToCalendar');
        const hoursToCalendarEl = document.getElementById('hoursToCalendar');
        const minutesToCalendarEl = document.getElementById('minutesToCalendar');
        const secondsToCalendarEl = document.getElementById('secondsToCalendar');
        const messageToCalendarEl = document.getElementById('messageToCalendar');
        const utcTimeDisplayEl = document.getElementById('utcTimeDisplay');
        const localTimeInfoEl = document.getElementById('localTimeInfo');
        const specialTimeInfoEl = document.getElementById('specialTimeInfo');
        const currentUTCDayEl = document.getElementById('currentUTCDay');
        const specialMessagesEl = document.getElementById('specialMessages');
        const mainTitleEl = document.getElementById('mainTitle');
        const mainSubtitleEl = document.getElementById('mainSubtitle');
        const mainFooterEl = document.getElementById('mainFooter');

        // Variables para el control de la cuenta regresiva
        let lastSeconds = {};
        let countdownInterval;

        // Audio para la m√∫sica de fondo
        const backgroundMusic = new Audio();
        backgroundMusic.loop = true;

        // Obtener fecha UTC actual
        function getUTCDate() {
            const now = new Date();
            return new Date(Date.UTC(
                now.getUTCFullYear(),
                now.getUTCMonth(),
                now.getUTCDate(),
                now.getUTCHours(),
                now.getUTCMinutes(),
                now.getUTCSeconds()
            ));
        }

        // Actualizar display de hora UTC
        function updateUTCTimeDisplay() {
            const now = getUTCDate();
            const utcTimeString = now.toUTCString();
            utcTimeDisplayEl.textContent = `Hora UTC actual: ${utcTimeString}`;
            
            // Actualizar tambi√©n el d√≠a UTC actual en el calendario
            if (currentUTCDayEl) {
                currentUTCDayEl.textContent = now.getUTCDate() + '/' + (now.getUTCMonth() + 1);
            }
        }

        // Formatear n√∫meros a 2 d√≠gitos
        function formatTime(number) {
            return number.toString().padStart(2, '0');
        }

        // Efecto flash cuando cambia un n√∫mero
        function flashElement(element) {
            element.classList.add('countdown-flash');
            setTimeout(() => {
                element.classList.remove('countdown-flash');
            }, 500);
        }

        // Fecha actual en UTC
        const todayUTC = getUTCDate();
        const currentUTCDay = todayUTC.getUTCDate();
        const currentUTCMonth = todayUTC.getUTCMonth(); // 0 = Enero, 11 = Diciembre
        const currentUTCYear = todayUTC.getUTCFullYear();

        // Fechas importantes en UTC
        const calendarStartDateUTC = new Date(Date.UTC(currentUTCYear, 11, 1)); // 1 de diciembre UTC
        const calendarEndDateUTC = new Date(Date.UTC(currentUTCYear + 1, 0, 7)); // 7 de enero UTC del pr√≥ximo a√±o
        const christmasDateUTC = new Date(Date.UTC(currentUTCYear, 11, 25)); // 25 de diciembre UTC
        const newYearDateUTC = new Date(Date.UTC(currentUTCYear + 1, 0, 1)); // 1 de enero del pr√≥ximo a√±o UTC
        const reyesDateUTC = new Date(Date.UTC(currentUTCYear + 1, 0, 6)); // 6 de enero del pr√≥ximo a√±o UTC

        // Cargar d√≠as abiertos desde localStorage
        let openedDays = JSON.parse(localStorage.getItem('adventCalendarOpenedDays')) || [];

        // Aplicar temas especiales seg√∫n la fecha
        function applySpecialThemes() {
            const body = document.body;
            body.classList.remove('christmas-theme', 'newyear-theme', 'reyes-theme');
            
            // Resetear todos los elementos
            mainTitleEl.innerHTML = 'üéÑ Calendario de Adviento M√°gico üéÖ';
            mainSubtitleEl.textContent = '¬°Abre una sorpresa cada d√≠a hasta Navidad y m√°s all√°!';
            mainFooterEl.innerHTML = '<p>Disfruta de cada d√≠a con una sorpresa √∫nica. ¬°Felices fiestas! üéÅ</p>';

            // Mostrar mensajes especiales
            specialMessagesEl.innerHTML = '';

            // Navidad (25 de diciembre)
            if (currentUTCMonth === 11 && currentUTCDay === 25) {
                body.classList.add('christmas-theme');
                mainTitleEl.innerHTML = 'üéÖ ¬°FELIZ NAVIDAD! üéÑ';
                mainSubtitleEl.textContent = 'Que este d√≠a est√© lleno de amor, alegr√≠a y momentos especiales';
                mainFooterEl.innerHTML = '<p>¬°Feliz Navidad! Que la magia de esta fecha llene tu hogar de alegr√≠a üéÅ</p>';
                specialMessagesEl.innerHTML = '<div class="special-message christmas-message">üéÑ ¬°FELIZ NAVIDAD! üéÖ</div>';
                createFireworks();
            }
            // A√±o Nuevo (1 de enero)
            else if (currentUTCMonth === 0 && currentUTCDay === 1) {
                body.classList.add('newyear-theme');
                mainTitleEl.innerHTML = 'üéÜ ¬°FELIZ A√ëO NUEVO! üéá';
                mainSubtitleEl.textContent = 'Que el nuevo a√±o traiga bendiciones, salud y prosperidad';
                mainFooterEl.innerHTML = '<p>¬°Feliz A√±o Nuevo! Que todos tus sue√±os se hagan realidad en el ' + (currentUTCYear + 1) + ' ‚ú®</p>';
                specialMessagesEl.innerHTML = '<div class="special-message newyear-message">üéÜ ¬°FELIZ A√ëO NUEVO! üéá</div>';
                createFireworks();
            }
            // Reyes Magos (6 de enero)
            else if (currentUTCMonth === 0 && currentUTCDay === 6) {
                body.classList.add('reyes-theme');
                mainTitleEl.innerHTML = 'üëë ¬°FELIZ D√çA DE REYES! üéÅ';
                mainSubtitleEl.textContent = 'Que los Reyes Magos te traigan muchos regalos y alegr√≠a';
                mainFooterEl.innerHTML = '<p>¬°Feliz D√≠a de Reyes! Que la magia de la ilusi√≥n nunca desaparezca ‚ú®</p>';
                specialMessagesEl.innerHTML = '<div class="special-message reyes-message">üëë ¬°FELIZ D√çA DE REYES! üéÅ</div>';
                createFireworks();
            }
        }

        // Inicializar la aplicaci√≥n
        function initApp() {
            // Actualizar display de hora UTC
            updateUTCTimeDisplay();
            setInterval(updateUTCTimeDisplay, 1000);

            // Aplicar temas especiales
            applySpecialThemes();

            // Verificar si estamos en el per√≠odo activo del calendario (1/12 al 7/01)
            const isActivePeriod = (currentUTCMonth === 11 && currentUTCDay >= 1) || 
                                 (currentUTCMonth === 0 && currentUTCDay <= 7);

            if (isActivePeriod) {
                // Mostrar calendario y contador de fiestas
                countdownToCalendarEl.style.display = 'none';
                calendarContainerEl.style.display = 'block';
                specialCountdownContainerEl.style.display = 'block';
                initCalendar();
                updateSpecialCountdown();
                setInterval(updateSpecialCountdown, 1000);
            } else if (currentUTCMonth === 10 && currentUTCDay < 31) {
                // Mostrar contador hasta diciembre UTC
                countdownToCalendarEl.style.display = 'block';
                calendarContainerEl.style.display = 'none';
                specialCountdownContainerEl.style.display = 'none';
                updateCalendarCountdown();
                setInterval(updateCalendarCountdown, 1000);
            } else {
                // Fuera del per√≠odo activo
                countdownToCalendarEl.style.display = 'none';
                calendarContainerEl.style.display = 'none';
                specialCountdownContainerEl.style.display = 'none';
                specialMessagesEl.innerHTML = '<div class="special-message">El calendario estar√° disponible del 1 de diciembre al 7 de enero</div>';
            }
        }

        // Actualizar contador hasta el calendario (UTC)
        function updateCalendarCountdown() {
            const nowUTC = getUTCDate();
            const timeRemaining = calendarStartDateUTC - nowUTC;
            
            if (timeRemaining <= 0) {
                // Ya es diciembre UTC, recargar para mostrar el calendario
                location.reload();
                return;
            }
            
            const days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);
            
            // Aplicar efectos de cuenta regresiva
            if (lastSeconds.daysToCalendar !== days) {
                daysToCalendarEl.textContent = formatTime(days);
                flashElement(daysToCalendarEl);
                lastSeconds.daysToCalendar = days;
            }
            
            if (lastSeconds.hoursToCalendar !== hours) {
                hoursToCalendarEl.textContent = formatTime(hours);
                flashElement(hoursToCalendarEl);
                lastSeconds.hoursToCalendar = hours;
            }
            
            if (lastSeconds.minutesToCalendar !== minutes) {
                minutesToCalendarEl.textContent = formatTime(minutes);
                flashElement(minutesToCalendarEl);
                lastSeconds.minutesToCalendar = minutes;
            }
            
            if (lastSeconds.secondsToCalendar !== seconds) {
                secondsToCalendarEl.textContent = formatTime(seconds);
                flashElement(secondsToCalendarEl);
                lastSeconds.secondsToCalendar = seconds;
            }
            
            // Actualizar mensaje
            if (days === 0) {
                messageToCalendarEl.textContent = "¬°El calendario se activar√° hoy!";
            } else if (days === 1) {
                messageToCalendarEl.textContent = "¬°Solo 1 d√≠a para que comience el calendario!";
            } else {
                messageToCalendarEl.textContent = `El calendario se activar√° el 1 de diciembre (en ${days} d√≠as)`;
            }
        }

        // Actualizar contador especial para Navidad y A√±o Nuevo
        function updateSpecialCountdown() {
            const nowUTC = getUTCDate();
            
            // D√≠as hasta Navidad
            const timeToChristmas = christmasDateUTC - nowUTC;
            const daysToChristmas = Math.floor(timeToChristmas / (1000 * 60 * 60 * 24));
            const hoursToChristmas = Math.floor((timeToChristmas % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutesToChristmas = Math.floor((timeToChristmas % (1000 * 60 * 60)) / (1000 * 60));
            const secondsToChristmas = Math.floor((timeToChristmas % (1000 * 60)) / 1000);
            
            // D√≠as hasta A√±o Nuevo
            const timeToNewYear = newYearDateUTC - nowUTC;
            const daysToNewYear = Math.floor(timeToNewYear / (1000 * 60 * 60 * 24));
            const hoursToNewYear = Math.floor((timeToNewYear % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutesToNewYear = Math.floor((timeToNewYear % (1000 * 60 * 60)) / (1000 * 60));
            const secondsToNewYear = Math.floor((timeToNewYear % (1000 * 60)) / 1000);
            
            // D√≠as hasta Reyes
            const timeToReyes = reyesDateUTC - nowUTC;
            const daysToReyes = Math.floor(timeToReyes / (1000 * 60 * 60 * 24));
            const hoursToReyes = Math.floor((timeToReyes % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutesToReyes = Math.floor((timeToReyes % (1000 * 60 * 60)) / (1000 * 60));
            const secondsToReyes = Math.floor((timeToReyes % (1000 * 60)) / 1000);
            
            // Actualizar contador especial
            specialCountdownEl.innerHTML = '';
            
            // Solo mostrar contador especial si estamos cerca de alguna fecha importante (15 d√≠as o menos)
            const showChristmasCountdown = daysToChristmas <= 10 && daysToChristmas >= 0;
            const showNewYearCountdown = daysToNewYear <= 7 && daysToNewYear >= 0;
            const showReyesCountdown = daysToReyes <= 7 && daysToReyes >= 0;
            
            if (showChristmasCountdown || showNewYearCountdown || showReyesCountdown) {
                specialCountdownContainerEl.style.display = 'block';
                
                if (showChristmasCountdown) {
                    const isUrgent = daysToChristmas <= 5;
                    const christmasCountdown = document.createElement('div');
                    christmasCountdown.className = 'special-countdown-section';
                    christmasCountdown.innerHTML = `
                        <h3 class="special-countdown-title">üéÑ Hasta Navidad</h3>
                        <div class="detailed-countdown">
                            <div class="detailed-countdown-item ${isUrgent ? 'urgent-countdown' : ''}">
                                <div class="detailed-countdown-number">${formatTime(Math.max(0, daysToChristmas))}</div>
                                <div class="detailed-countdown-label">D√≠as</div>
                            </div>
                            <div class="detailed-countdown-item ${isUrgent ? 'urgent-countdown' : ''}">
                                <div class="detailed-countdown-number">${formatTime(Math.max(0, hoursToChristmas))}</div>
                                <div class="detailed-countdown-label">Horas</div>
                            </div>
                            <div class="detailed-countdown-item ${isUrgent ? 'urgent-countdown' : ''}">
                                <div class="detailed-countdown-number">${formatTime(Math.max(0, minutesToChristmas))}</div>
                                <div class="detailed-countdown-label">Minutos</div>
                            </div>
                            <div class="detailed-countdown-item ${isUrgent ? 'urgent-countdown' : ''}">
                                <div class="detailed-countdown-number">${formatTime(Math.max(0, secondsToChristmas))}</div>
                                <div class="detailed-countdown-label">Segundos</div>
                            </div>
                        </div>
                    `;
                    specialCountdownEl.appendChild(christmasCountdown);
                }
                
                if (showNewYearCountdown) {
                    const isUrgent = daysToNewYear <= 5;
                    const newYearCountdown = document.createElement('div');
                    newYearCountdown.className = 'special-countdown-section';
                    newYearCountdown.innerHTML = `
                        <h3 class="special-countdown-title">üéÜ Hasta A√±o Nuevo</h3>
                        <div class="detailed-countdown">
                            <div class="detailed-countdown-item ${isUrgent ? 'urgent-countdown' : ''}">
                                <div class="detailed-countdown-number">${formatTime(Math.max(0, daysToNewYear))}</div>
                                <div class="detailed-countdown-label">D√≠as</div>
                            </div>
                            <div class="detailed-countdown-item ${isUrgent ? 'urgent-countdown' : ''}">
                                <div class="detailed-countdown-number">${formatTime(Math.max(0, hoursToNewYear))}</div>
                                <div class="detailed-countdown-label">Horas</div>
                            </div>
                            <div class="detailed-countdown-item ${isUrgent ? 'urgent-countdown' : ''}">
                                <div class="detailed-countdown-number">${formatTime(Math.max(0, minutesToNewYear))}</div>
                                <div class="detailed-countdown-label">Minutos</div>
                            </div>
                            <div class="detailed-countdown-item ${isUrgent ? 'urgent-countdown' : ''}">
                                <div class="detailed-countdown-number">${formatTime(Math.max(0, secondsToNewYear))}</div>
                                <div class="detailed-countdown-label">Segundos</div>
                            </div>
                        </div>
                    `;
                    specialCountdownEl.appendChild(newYearCountdown);
                }
                
                if (showReyesCountdown) {
                    const isUrgent = daysToReyes <= 5;
                    const reyesCountdown = document.createElement('div');
                    reyesCountdown.className = 'special-countdown-section';
                    reyesCountdown.innerHTML = `
                        <h3 class="special-countdown-title">üëë Hasta Reyes</h3>
                        <div class="detailed-countdown">
                            <div class="detailed-countdown-item ${isUrgent ? 'urgent-countdown' : ''}">
                                <div class="detailed-countdown-number">${formatTime(Math.max(0, daysToReyes))}</div>
                                <div class="detailed-countdown-label">D√≠as</div>
                            </div>
                            <div class="detailed-countdown-item ${isUrgent ? 'urgent-countdown' : ''}">
                                <div class="detailed-countdown-number">${formatTime(Math.max(0, hoursToReyes))}</div>
                                <div class="detailed-countdown-label">Horas</div>
                            </div>
                            <div class="detailed-countdown-item ${isUrgent ? 'urgent-countdown' : ''}">
                                <div class="detailed-countdown-number">${formatTime(Math.max(0, minutesToReyes))}</div>
                                <div class="detailed-countdown-label">Minutos</div>
                            </div>
                            <div class="detailed-countdown-item ${isUrgent ? 'urgent-countdown' : ''}">
                                <div class="detailed-countdown-number">${formatTime(Math.max(0, secondsToReyes))}</div>
                                <div class="detailed-countdown-label">Segundos</div>
                            </div>
                        </div>
                    `;
                    specialCountdownEl.appendChild(reyesCountdown);
                }
                
                // Actualizar t√≠tulo y mensaje
                if (daysToChristmas <= 5 || daysToNewYear <= 5 || daysToReyes <= 5) {
                    specialCountdownTitleEl.textContent = '¬°Faltan muy pocos d√≠as! ‚è∞';
                    specialCountdownMessageEl.textContent = '¬°Prep√°rate para celebrar!';
                } else {
                    specialCountdownTitleEl.textContent = '¬°Se acercan las fiestas! üéâ';
                    specialCountdownMessageEl.textContent = '¬°La cuenta atr√°s contin√∫a!';
                }
            } else {
                specialCountdownContainerEl.style.display = 'none';
            }
        }


        // Inicializar el calendario
        function initCalendar() {
            // A√±adir t√≠tulo y d√≠as de la semana
            calendarEl.innerHTML = '<div class="calendar-title">Diciembre ' + currentUTCYear + ' - Enero ' + (currentUTCYear + 1) + '</div>';
            const dayLabels = ['Dom', 'Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b'];
            dayLabels.forEach(label => {
                const labelEl = document.createElement('div');
                labelEl.className = 'day-label';
                labelEl.textContent = label;
                calendarEl.appendChild(labelEl);
            });

            // Calcular el d√≠a de la semana del 1 de diciembre
            const firstDay = new Date(Date.UTC(currentUTCYear, 11, 1)).getUTCDay();
            
            // A√±adir espacios vac√≠os para alinear el calendario
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'day disabled';
                calendarEl.appendChild(emptyDay);
            }

            // A√±adir los d√≠as del per√≠odo activo (1/12 al 7/01)
            const startDate = new Date(Date.UTC(currentUTCYear, 11, 1));
            const endDate = new Date(Date.UTC(currentUTCYear + 1, 0, 7));
            
            let currentDate = new Date(startDate);
            let dayCount = 0;
            
            while (currentDate <= endDate) {
                const day = currentDate.getUTCDate();
                const month = currentDate.getUTCMonth();
                const year = currentDate.getUTCFullYear();
                
                const dayEl = document.createElement('div');
                dayEl.className = 'day';
                
                // Para enero, mostrar "Ene" en el contenido
                const monthLabel = month === 11 ? 'Dic' : 'Ene';
                const displayDay = month === 11 ? day : day + '.Ene';
                
                dayEl.innerHTML = `
                    <div class="day-number">${displayDay}</div>
                    <div class="day-content">${getDayContent(day, month)}</div>
                `;
                
                // Usar clave √∫nica que incluya mes y d√≠a
                const dayKey = month === 11 ? day : day + '.' + (month + 1);
                dayEl.dataset.day = dayKey;

                // Verificar si el d√≠a est√° disponible (d√≠as pasados o actual)
                const isPastOrCurrent = (month === 11 && day <= currentUTCDay) || 
                                      (month === 0 && day <= currentUTCDay && currentUTCMonth === 0);
                
                if (isPastOrCurrent) {
                    dayEl.addEventListener('click', () => openDay(dayKey, month));
                    
                    // Marcar como hoy si es el d√≠a actual
                    if (day === currentUTCDay && month === currentUTCMonth) {
                        dayEl.classList.add('today');
                    }
                    
                    // Marcar como abierto si ya fue abierto antes
                    if (openedDays.includes(dayKey)) {
                        dayEl.classList.add('opened');
                    }
                } else {
                    // D√≠as futuros
                    dayEl.classList.add('disabled');
                }

                // A√±adir clases especiales para d√≠as festivos
                if ((month === 11 && day === 24) || (month === 11 && day === 25)) {
                    dayEl.classList.add('christmas');
                    dayEl.classList.add('special');
                } else if ((month === 0 && day === 1)) {
                    dayEl.classList.add('new-year');
                    dayEl.classList.add('special');
                } else if ((month === 0 && day === 6)) {
                    dayEl.classList.add('reyes');
                    dayEl.classList.add('special');
                } else if (dayKey === '7.1') {
                    dayEl.classList.add('special');
                }

                calendarEl.appendChild(dayEl);
                
                // Siguiente d√≠a
                currentDate.setUTCDate(currentDate.getUTCDate() + 1);
                dayCount++;
            }
        }

        // Obtener contenido para mostrar en el d√≠a
        function getDayContent(day, month) {
            const dayKey = month === 11 ? day : day + '.' + (month + 1);
            
            if (month === 11 && day === 24) return "Nochebuena";
            if (month === 11 && day === 25) return "Navidad";
            if (month === 0 && day === 1) return "A√±o Nuevo";
            if (month === 0 && day === 6) return "Reyes Magos";
            if (dayKey === '7.1') return "Fin del calendario";
            
            if (dailyContent[dayKey]) {
                if (dailyContent[dayKey].type === "audio") return "üéµ M√∫sica";
                if (dailyContent[dayKey].type === "image") return "üñºÔ∏è Imagen";
                if (dailyContent[dayKey].type === "text") return "üìù Texto";
                if (dailyContent[dayKey].type === "special-audio") return "üé∂ M√∫sica Especial";
            }
            return "";
        }

        // Abrir un d√≠a del calendario
        function openDay(dayKey, month) {
            const content = dailyContent[dayKey];
            if (!content) return;

            // Guardar en localStorage que este d√≠a fue abierto
            if (!openedDays.includes(dayKey)) {
                openedDays.push(dayKey);
                localStorage.setItem('adventCalendarOpenedDays', JSON.stringify(openedDays));
            }

            // Marcar el d√≠a como abierto
            const dayEl = document.querySelector(`.day[data-day="${dayKey}"]`);
            if (dayEl) {
                dayEl.classList.add('opened');
            }

            // Mostrar el contenido en el modal
            modalTitleEl.textContent = content.title;
            
            let contentHTML = '';
            if (content.type === 'image') {
                contentHTML = `
                    <img src="${content.content}" alt="Imagen del d√≠a ${dayKey}" class="modal-image">
                    <p class="modal-text">${content.text}</p>
                `;
            } else if (content.type === 'audio') {
                contentHTML = `
                    <audio controls class="modal-audio">
                        <source src="${content.content}" type="audio/mpeg">
                        Tu navegador no soporta el elemento de audio.
                    </audio>
                    <p class="modal-text">${content.text}</p>
                `;
            } else if (content.type === 'text') {
                contentHTML = `
                    <div class="modal-text" style="font-size: 1.5rem; font-weight: bold; margin: 20px 0;">
                        "${content.content}"
                    </div>
                    <p class="modal-text">${content.text}</p>
                `;
            } else if (content.type === 'special-audio') {
                contentHTML = `
                    <p class="modal-text">${content.text}</p>
                    <div class="audio-options">
                        <button class="audio-option" onclick="playAudio('${musicBaseURL + "Yo%20Quiero%20-%20A%20New%20World%20(Piano%20Version).mp3"}')">
                            Versi√≥n Piano
                        </button>
                        <button class="audio-option" onclick="playAudio('${musicBaseURL + "Yo%20Quiero%20-%20A%20New%20World.mp3"}')">
                            Versi√≥n Completa
                        </button>
                        <button class="audio-option" onclick="playAudio('${musicBaseURL + "Yo%20Quiero%20-%20A%20New%20World%20-Versi√≥n%20Instrumental.mp3"}')">
                            Versi√≥n Instrumental
                        </button>
                        <button class="audio-option" onclick="playAudio('${musicBaseURL + "Yo%20Quiero%20-%20A%20New%20World%20-%20Versi√≥n%20Karaoke.mp3"}')">
                            Versi√≥n Karaoke
                        </button>
                    </div>
                    <audio id="specialAudio" controls class="modal-audio" style="display: none;">
                        Tu navegador no soporta el elemento de audio.
                    </audio>
                `;
            }

            modalContentEl.innerHTML = contentHTML;
            modalEl.style.display = 'flex';

            // Efectos especiales para d√≠as festivos
            if (dayKey === '24' || dayKey === '25' || dayKey === '1.1' || dayKey === '6.1') {
                createFireworks();
            }
        }

        // Funci√≥n para reproducir audio especial
        function playAudio(url) {
            const audioElement = document.getElementById('specialAudio');
            audioElement.src = url;
            audioElement.style.display = 'block';
            audioElement.play();
        }

        // Cerrar el modal
        function closeModal() {
            modalEl.style.display = 'none';
            // Detener cualquier audio que est√© reproduci√©ndose
            const audios = document.querySelectorAll('audio');
            audios.forEach(audio => {
                audio.pause();
                audio.currentTime = 0;
            });
        }

        // Reproducir m√∫sica de fondo
        function playBackgroundMusic() {
            backgroundMusic.play().catch(e => {
                console.log("La reproducci√≥n autom√°tica fue bloqueada. Haz clic en reproducir.");
                alert("Para reproducir la m√∫sica, haz clic en el bot√≥n 'Reproducir M√∫sica Navide√±a'.");
            });
        }

        // Detener m√∫sica de fondo
        function stopBackgroundMusic() {
            backgroundMusic.pause();
            backgroundMusic.currentTime = 0;
        }

        // Crear efecto de nieve
        function createSnowflakes() {
            const snowContainer = document.body;
            const snowflakeCount = 100;

            for (let i = 0; i < snowflakeCount; i++) {
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                snowflake.innerHTML = '‚ùÑ';
                snowflake.style.left = `${Math.random() * 100}vw`;
                snowflake.style.animationDuration = `${Math.random() * 5 + 5}s`;
                snowflake.style.opacity = Math.random();
                snowflake.style.fontSize = `${Math.random() * 15 + 10}px`;
                snowflake.style.animationDelay = `${Math.random() * 5}s`;
                
                snowContainer.appendChild(snowflake);
            }
        }

        // Crear efecto de fuegos artificiales
        function createFireworks() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#ffffff'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.className = 'firework';
                    firework.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    firework.style.left = `${Math.random() * 100}vw`;
                    firework.style.top = `${Math.random() * 100}vh`;
                    
                    document.body.appendChild(firework);
                    
                    // Animaci√≥n
                    firework.animate([
                        { transform: 'scale(0)', opacity: 1 },
                        { transform: `scale(${Math.random() * 3 + 1})`, opacity: 0 }
                    ], {
                        duration: 1000 + Math.random() * 1000,
                        easing: 'ease-out'
                    });
                    
                    // Eliminar despu√©s de la animaci√≥n
                    setTimeout(() => {
                        firework.remove();
                    }, 2000);
                }, i * 100);
            }
        }

        // Event listeners
        closeModalEl.addEventListener('click', closeModal);
        modalEl.addEventListener('click', (e) => {
            if (e.target === modalEl) closeModal();
        });
        playMusicBtn.addEventListener('click', playBackgroundMusic);
        stopMusicBtn.addEventListener('click', stopBackgroundMusic);

        // Inicializar la aplicaci√≥n
        initApp();
        createSnowflakes();

        // Mensaje de consola divertido
        console.log(`
        üéÑ ¬°Feliz Navidad! üéÖ
        Este calendario de adviento fue creado con ‚ù§Ô∏è
        ¬°Disfruta de cada d√≠a con una sorpresa √∫nica!
        `);
    </script>
    </main>
    <!-- Footer -->
    <div id="footer"></div>
<script src="preloader.js"></script>
</body>
</html>
