<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Christmas - Grouvex Studios</title>
    <meta name="description" content="Celebra Navidad, A√±o Nuevo y Reyes magos en nuestro Sitio web oficial de Grouvex Studios. Felices Fiestas">
    <meta property="og:title" content="Christmas - Grouvex Studios">
    <meta property="og:description" content="Celebra Navidad, A√±o Nuevo y Reyes magos en nuestro Sitio web oficial de Grouvex Studios. Felices Fiestas">
    <meta property="og:image" content="https://raw.githubusercontent.com/Grouvex/grouvex.github.io/refs/heads/main/img/Grouvex1.png">
    <meta name="keywords" content="Grouvex, M√∫sica, Grouvex Studios, Grouvex's Projects"><meta name="author" content="Grouvex Studios"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="theme-color" content="#hexcode"><meta property="og:url" content="https://www.grouvex.com/christmas"><meta property="og:type" content="website"><meta property="og:locale" content="es_ES"><link rel="canonical" href="https://www.grouvex.com/christmas"><link rel="icon" href="img/GROUVEX.png" type="image/x-icon"><meta property="og:site_name" content="Grouvex Studios">
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script><script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script><script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <link rel="stylesheet" href="index.css">
    <script src="time.js"></script></script><script type="module" src="abc.js"></script><script src="index.js"></script>
    <script src="jquery-3.5.1.min.js"></script>
        <script> 
            document.addEventListener("DOMContentLoaded", function() { 
                $("#menuG").load("menuG.html");$("#menuE").load("menuE.html");$("#menuT").load("menuT.html");$("#menuU").load("menuU.html");
                $("#footer").load("footer.html"); 
                $("#news").load("news.html"); $("#tosypp").load("tosypp.html");
            });
    </script>
</head>
    <title>Calendario de Adviento M√°gico (UTC)</title>
<style>
/* ESTILOS PRIORITARIOS - CALENDARIO DE ADVIENTO */
:root {
    --primary-color: #1a472a;
    --secondary-color: #2e8b57;
    --accent-color: #ff6b6b;
    --gold-color: #ffd700;
    --light-color: #f8f9fa;
    --dark-color: #1a1a2e;
    --blue-color: #4a90e2;
    --purple-color: #9b59b6;
    --red-color: #e74c3c;
}

* {
    margin: 0 !important;
    padding: 0 !important;
    box-sizing: border-box !important;
    font-family: 'Comic Sans MS', cursive, sans-serif !important;
}

body {
    background: linear-gradient(135deg, #1a472a, #2e8b57) !important;
    color: var(--light-color) !important;
    min-height: 100vh !important;
    padding: 20px !important;
    overflow-x: hidden !important;
    position: relative !important;
    transition: all 1s ease !important;
}

/* Fondos especiales */
body.christmas-theme {
    background: linear-gradient(135deg, #b30000, #1a472a) !important;
    background-image: 
        radial-gradient(circle at 10% 20%, rgba(255, 215, 0, 0.3) 0%, transparent 20%),
        radial-gradient(circle at 90% 80%, rgba(255, 215, 0, 0.3) 0%, transparent 20%),
        radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%) !important;
}

body.christmas-theme header {
    background: rgba(179, 0, 0, 0.6) !important;
    border: 3px solid var(--gold-color) !important;
}

body.christmas-theme .countdown-container {
    background: rgba(179, 0, 0, 0.6) !important;
    border: 2px solid var(--gold-color) !important;
}

body.christmas-theme .countdown-item {
    background: linear-gradient(145deg, #b30000, #8B0000) !important;
    border: 2px solid var(--gold-color) !important;
}

body.newyear-theme {
    background: linear-gradient(135deg, #000428, #004e92) !important;
    background-image: 
        radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.4) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 215, 0, 0.3) 0%, transparent 50%) !important;
    animation: sparkle 3s infinite alternate !important;
}

body.newyear-theme header {
    background: rgba(0, 78, 146, 0.6) !important;
    border: 3px solid #00ffff !important;
}

body.newyear-theme .countdown-container {
    background: rgba(0, 78, 146, 0.6) !important;
    border: 2px solid #00ffff !important;
}

body.newyear-theme .countdown-item {
    background: linear-gradient(145deg, #004e92, #000428) !important;
    border: 2px solid #00ffff !important;
}

body.reyes-theme {
    background: linear-gradient(135deg, #8B4513, #D2691E, #FFD700) !important;
    background-image: 
        radial-gradient(circle at 30% 30%, rgba(255, 215, 0, 0.4) 0%, transparent 40%),
        radial-gradient(circle at 70% 70%, rgba(139, 69, 19, 0.3) 0%, transparent 40%) !important;
}

body.reyes-theme header {
    background: rgba(139, 69, 19, 0.6) !important;
    border: 3px solid var(--gold-color) !important;
}

body.reyes-theme .countdown-container {
    background: rgba(210, 105, 30, 0.6) !important;
    border: 2px solid var(--gold-color) !important;
}

body.reyes-theme .countdown-item {
    background: linear-gradient(145deg, #D2691E, #8B4513) !important;
    border: 2px solid var(--gold-color) !important;
}

@keyframes sparkle {
    0% { background: linear-gradient(135deg, #000428, #004e92) !important; }
    100% { background: linear-gradient(135deg, #004e92, #000428) !important; }
}

.container {
    max-width: 1200px !important;
    margin: 0 auto !important;
    text-align: center !important;
}

header {
    margin-bottom: 30px !important;
    padding: 20px !important;
    background: rgba(0, 0, 0, 0.3) !important;
    border-radius: 15px !important;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2) !important;
    backdrop-filter: blur(10px) !important;
    transition: all 0.5s ease !important;
}

h1 {
    font-size: 3rem !important;
    margin-bottom: 10px !important;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5) !important;
    color: var(--gold-color) !important;
    transition: all 0.5s ease !important;
}

.subtitle {
    font-size: 1.2rem !important;
    margin-bottom: 10px !important;
    opacity: 0.9 !important;
}

.utc-notice {
    background: rgba(255, 215, 0, 0.2) !important;
    border: 2px solid var(--gold-color) !important;
    border-radius: 10px !important;
    padding: 10px !important;
    margin-top: 10px !important;
    font-size: 1rem !important;
}

.utc-time {
    font-weight: bold !important;
    color: var(--gold-color) !important;
}

/* Contadores */
.countdown-container {
    display: none !important;
    margin: 30px auto !important;
    max-width: 800px !important;
    background: rgba(0, 0, 0, 0.4) !important;
    border-radius: 15px !important;
    padding: 20px !important;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3) !important;
    backdrop-filter: blur(10px) !important;
    transition: all 0.5s ease !important;
}

.countdown-title {
    font-size: 2rem !important;
    margin-bottom: 20px !important;
    color: var(--gold-color) !important;
}

.countdown {
    display: flex !important;
    justify-content: center !important;
    gap: 15px !important;
    margin-bottom: 20px !important;
}

.countdown-item {
    background: linear-gradient(145deg, var(--secondary-color), var(--primary-color)) !important;
    border-radius: 10px !important;
    padding: 15px !important;
    min-width: 100px !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important;
    transition: all 0.5s ease !important;
    border: 2px solid transparent !important;
    position: relative !important;
    overflow: hidden !important;
}

.countdown-number {
    font-size: 2.5rem !important;
    font-weight: bold !important;
    margin-bottom: 5px !important;
    color: var(--gold-color) !important;
    font-family: 'Courier New', monospace !important;
}

.countdown-label {
    font-size: 0.9rem !important;
    opacity: 0.9 !important;
}

.countdown-message {
    font-size: 1.2rem !important;
    margin-top: 15px !important;
    color: var(--gold-color) !important;
}

/* Efectos de cuenta regresiva */
.countdown-flash {
    animation: countdownFlash 0.5s ease-in-out !important;
}

@keyframes countdownFlash {
    0% { transform: scale(1) !important; }
    50% { transform: scale(1.1) !important; background: var(--accent-color) !important; }
    100% { transform: scale(1) !important; }
}

/* Calendario */
.calendar-container {
    display: none !important;
}

.calendar {
    display: grid !important;
    grid-template-columns: repeat(7, 1fr) !important;
    gap: 10px !important;
    margin-bottom: 30px !important;
}

.calendar-title {
    grid-column: 1 / -1 !important;
    font-size: 1.8rem !important;
    margin-bottom: 10px !important;
    color: var(--gold-color) !important;
}

.day-label {
    font-weight: bold !important;
    padding: 10px !important;
    background: rgba(255, 255, 255, 0.1) !important;
    border-radius: 5px !important;
}

.day {
    aspect-ratio: 1 !important;
    background: linear-gradient(145deg, var(--secondary-color), var(--primary-color)) !important;
    border-radius: 10px !important;
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;
    font-size: 1.5rem !important;
    font-weight: bold !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important;
    position: relative !important;
    overflow: hidden !important;
    padding: 5px !important;
}

.day:hover {
    transform: translateY(-5px) !important;
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3) !important;
}

.day-number {
    font-size: 1.8rem !important;
}

.day-content {
    font-size: 0.9rem !important;
    margin-top: 5px !important;
    text-align: center !important;
}

.day.opened {
    background: linear-gradient(145deg, var(--gold-color), #ffa500) !important;
    color: var(--dark-color) !important;
    transform: scale(0.95) !important;
}

.day.opened::after {
    content: "‚úì" !important;
    position: absolute !important;
    bottom: 5px !important;
    right: 5px !important;
    font-size: 1rem !important;
    color: var(--dark-color) !important;
}

.day.disabled {
    background: linear-gradient(145deg, #555, #333) !important;
    color: #777 !important;
    cursor: not-allowed !important;
}

.day.disabled:hover {
    transform: none !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important;
}

.day.today {
    border: 3px solid var(--accent-color) !important;
    animation: pulse 2s infinite !important;
}

.day.special {
    background: linear-gradient(145deg, var(--accent-color), #ff5252) !important;
    color: white !important;
}

.day.christmas {
    background: linear-gradient(145deg, var(--gold-color), #ff6b6b) !important;
    color: var(--dark-color) !important;
    animation: christmasGlow 2s infinite alternate !important;
}

.day.new-year {
    background: linear-gradient(145deg, var(--blue-color), var(--purple-color)) !important;
    color: white !important;
    animation: newYearGlow 1.5s infinite alternate !important;
}

.day.reyes {
    background: linear-gradient(145deg, #8B4513, #D2691E, #FFD700) !important;
    color: white !important;
    animation: reyesGlow 2s infinite alternate !important;
}

@keyframes pulse {
    0% { 
        box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.7) !important;
        transform: scale(1) !important;
    }
    50% { 
        transform: scale(1.05) !important;
    }
    70% { 
        box-shadow: 0 0 0 15px rgba(255, 107, 107, 0) !important;
    }
    100% { 
        box-shadow: 0 0 0 0 rgba(255, 107, 107, 0) !important;
        transform: scale(1) !important;
    }
}

@keyframes christmasGlow {
    0% { 
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.5) !important;
        transform: scale(1) !important;
    }
    100% { 
        box-shadow: 0 0 40px rgba(255, 0, 0, 0.8) !important;
        transform: scale(1.05) !important;
    }
}

@keyframes newYearGlow {
    0% { 
        box-shadow: 0 0 20px rgba(74, 144, 226, 0.5) !important;
        transform: scale(1) !important;
    }
    100% { 
        box-shadow: 0 0 40px rgba(155, 89, 182, 0.8) !important;
        transform: scale(1.05) !important;
    }
}

@keyframes reyesGlow {
    0% { 
        box-shadow: 0 0 20px rgba(139, 69, 19, 0.5) !important;
        transform: scale(1) !important;
    }
    100% { 
        box-shadow: 0 0 40px rgba(255, 215, 0, 0.8) !important;
        transform: scale(1.05) !important;
    }
}

/* Modal */
.modal {
    display: none !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    background: rgba(0, 0, 0, 0.8) !important;
    z-index: 1000 !important;
    align-items: center !important;
    justify-content: center !important;
}

.modal-content {
    background: linear-gradient(135deg, var(--light-color), #e9ecef) !important;
    color: var(--dark-color) !important;
    width: 90% !important;
    max-width: 500px !important;
    padding: 30px !important;
    border-radius: 15px !important;
    text-align: center !important;
    position: relative !important;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5) !important;
    animation: modalAppear 0.5s ease !important;
}

@keyframes modalAppear {
    from { transform: scale(0.8) !important; opacity: 0 !important; }
    to { transform: scale(1) !important; opacity: 1 !important; }
}

.close-modal {
    position: absolute !important;
    top: 15px !important;
    right: 15px !important;
    font-size: 1.5rem !important;
    cursor: pointer !important;
    color: var(--dark-color) !important;
}

.modal-title {
    color: var(--primary-color) !important;
    margin-bottom: 15px !important;
    font-size: 1.8rem !important;
}

.modal-image {
    max-width: 100% !important;
    max-height: 200px !important;
    border-radius: 10px !important;
    margin: 15px 0 !important;
}

.modal-audio {
    width: 100% !important;
    margin: 15px 0 !important;
}

.modal-text {
    margin: 15px 0 !important;
    line-height: 1.6 !important;
}

/* Copos de nieve */
.snowflake {
    position: absolute !important;
    top: -10px !important;
    color: white !important;
    font-size: 1rem !important;
    user-select: none !important;
    pointer-events: none !important;
    z-index: -1 !important;
    animation-name: fall !important;
    animation-timing-function: linear !important;
    animation-iteration-count: infinite !important;
}

@keyframes fall {
    to {
        transform: translateY(100vh) rotate(360deg) !important;
    }
}

/* Controles de m√∫sica */
.music-controls {
    margin-top: 20px !important;
    display: flex !important;
    justify-content: center !important;
    gap: 15px !important;
}

.music-btn {
    background: var(--accent-color) !important;
    color: white !important;
    border: none !important;
    padding: 10px 20px !important;
    border-radius: 50px !important;
    cursor: pointer !important;
    font-weight: bold !important;
    transition: all 0.3s ease !important;
    display: flex !important;
    align-items: center !important;
    gap: 8px !important;
}

.music-btn:hover {
    background: #ff5252 !important;
    transform: scale(1.05) !important;
}

footer {
    margin-top: 30px !important;
    padding: 15px !important;
    background: rgba(0, 0, 0, 0.3) !important;
    border-radius: 10px !important;
    font-size: 0.9rem !important;
    transition: all 0.5s ease !important;
}

.audio-options {
    display: flex !important;
    flex-direction: column !important;
    gap: 10px !important;
    margin: 15px 0 !important;
}

.audio-option {
    background: var(--secondary-color) !important;
    color: white !important;
    border: none !important;
    padding: 10px !important;
    border-radius: 5px !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
}

.audio-option:hover {
    background: var(--primary-color) !important;
}

.firework {
    position: absolute !important;
    width: 5px !important;
    height: 5px !important;
    border-radius: 50% !important;
    pointer-events: none !important;
    z-index: 100 !important;
}

.time-info {
    margin-top: 10px !important;
    font-size: 0.9rem !important;
    opacity: 0.8 !important;
}

.special-message {
    font-size: 2.5rem !important;
    font-weight: bold !important;
    margin: 20px 0 !important;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5) !important;
    animation: textGlow 2s infinite alternate !important;
    padding: 20px !important;
    border-radius: 15px !important;
    backdrop-filter: blur(10px) !important;
}

@keyframes textGlow {
    0% { 
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.5) !important;
        transform: scale(1) !important;
    }
    100% { 
        text-shadow: 0 0 20px rgba(255, 215, 0, 0.8) !important;
        transform: scale(1.05) !important;
    }
}

.christmas-message {
    color: #ff6b6b !important;
    background: rgba(179, 0, 0, 0.3) !important;
    border: 3px solid var(--gold-color) !important;
}

.newyear-message {
    color: #4a90e2 !important;
    background: rgba(0, 78, 146, 0.3) !important;
    border: 3px solid #00ffff !important;
}

.reyes-message {
    color: #FFD700 !important;
    background: rgba(139, 69, 19, 0.3) !important;
    border: 3px solid var(--gold-color) !important;
}

.countdown-progress {
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    height: 3px !important;
    background: var(--gold-color) !important;
    width: 100% !important;
    transform-origin: left !important;
    animation: progressBar 1s linear forwards !important;
}

@keyframes progressBar {
    from { transform: scaleX(1) !important; }
    to { transform: scaleX(0) !important; }
}

/* Responsive */
@media (max-width: 768px) {
    .calendar {
        grid-template-columns: repeat(4, 1fr) !important;
    }
    
    .countdown {
        flex-wrap: wrap !important;
    }
    
    .countdown-item {
        min-width: 80px !important;
    }
    
    h1 {
        font-size: 2rem !important;
    }
}

@media (max-width: 480px) {
    .calendar {
        grid-template-columns: repeat(3, 1fr) !important;
    }
    
    .countdown-item {
        min-width: 70px !important;
        padding: 10px !important;
    }
    
    .countdown-number {
        font-size: 2rem !important;
    }
    
    h1 {
        font-size: 1.8rem !important;
    }
}
</style>
</head>
<body>
    <header>
        <a href="https://grouvex.github.io/"> <div class="img-container" loading="lazy"></div></a> 
        <span style="font-family: Times New Roman;color:white;box-shadow: 0 0 10px gold;width:100%">
            <nav>
                <span id="menuG"></span>
                <span id="menuT"></span>
                <span id="menuU"></span>
            </nav>
        </span>
    </header>
    <!-- Anuncio -->
    <div id="news"></div>
    <div class="container">
        <header>
            <h1 id="mainTitle">üéÑ Calendario de Adviento M√°gico üéÖ</h1>
            <p class="subtitle" id="mainSubtitle">¬°Abre una sorpresa cada d√≠a hasta Navidad y m√°s all√°!</p>
            <div class="utc-notice">
                ‚ö†Ô∏è <strong>CALENDARIO EN HORARIO UTC</strong> ‚ö†Ô∏è<br>
                Los d√≠as cambian seg√∫n la hora UTC (Tiempo Universal Coordinado)<br>
                <span class="utc-time" id="utcTimeDisplay">Hora UTC actual: calculando...</span>
            </div>
        </header>

        <!-- Mensajes especiales -->
        <div id="specialMessages"></div>

        <!-- Contador hasta el inicio del calendario -->
        <div class="countdown-container" id="countdownToCalendar">
            <h2 class="countdown-title">¬°Pronto comenzar√° la magia navide√±a!</h2>
            <div class="countdown" id="countdownCalendar">
                <div class="countdown-item">
                    <div class="countdown-number" id="daysToCalendar">00</div>
                    <div class="countdown-label">D√≠as</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="hoursToCalendar">00</div>
                    <div class="countdown-label">Horas</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="minutesToCalendar">00</div>
                    <div class="countdown-label">Minutos</div>
                </div>
                <div class="countdown-item">
                    <div class="countdown-number" id="secondsToCalendar">00</div>
                    <div class="countdown-label">Segundos</div>
                </div>
            </div>
            <p class="countdown-message" id="messageToCalendar">El calendario se activar√° el 1 de diciembre (UTC)</p>
            <div class="time-info" id="localTimeInfo"></div>
        </div>

        <!-- Contador hasta Navidad y A√±o Nuevo -->
        <div class="countdown-container" id="countdownToHolidays">
            <h2 class="countdown-title" id="holidaysTitle">¬°Cuenta atr√°s para las fiestas! (UTC)</h2>
            <div class="countdown">
                <div class="countdown-item" id="christmasCountdown">
                    <div class="countdown-number" id="daysToChristmas">00</div>
                    <div class="countdown-label">D√≠as para Navidad</div>
                </div>
                <div class="countdown-item" id="newyearCountdown">
                    <div class="countdown-number" id="daysToNewYear">00</div>
                    <div class="countdown-label">D√≠as para A√±o Nuevo</div>
                </div>
                <div class="countdown-item" id="reyesCountdown">
                    <div class="countdown-number" id="daysToReyes">00</div>
                    <div class="countdown-label">D√≠as para Reyes</div>
                </div>
            </div>
            <p class="countdown-message" id="holidaysMessage">¬°Disfruta cada d√≠a del calendario!</p>
            <div class="time-info" id="holidaysTimeInfo"></div>
        </div>

        <!-- Calendario completo de diciembre -->
        <div class="calendar-container" id="calendarContainer">
            <div class="calendar" id="calendar">
                <!-- Los d√≠as se generar√°n con JavaScript -->
            </div>

            <div class="music-controls">
                <button class="music-btn" id="playMusic">
                    <span>üéµ</span> Reproducir M√∫sica Navide√±a
                </button>
                <button class="music-btn" id="stopMusic">
                    <span>üîá</span> Detener M√∫sica
                </button>
            </div>
            <div class="time-info">
                Calendario activo del 1/12 al 7/01. D√≠a actual (UTC): <span id="currentUTCDay"></span>
            </div>
        </div>

        <footer id="mainFooter">
            <p>Disfruta de cada d√≠a con una sorpresa √∫nica. ¬°Felices fiestas! üéÅ</p>
        </footer>
    </div>

    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal">&times;</span>
            <h2 class="modal-title" id="modalTitle">D√≠a 1</h2>
            <div id="modalContent">
                <!-- El contenido espec√≠fico del d√≠a se cargar√° aqu√≠ -->
            </div>
        </div>
    </div>

    <script>
        // URLs de m√∫sica desde tu repositorio
        const musicBaseURL = "https://raw.githubusercontent.com/Grouvex/grouvex.github.io/main/music/";
        
        // Contenido para cada d√≠a del calendario
        const dailyContent = {
            1: {
                title: "¬°Feliz 1 de Diciembre!",
                type: "image",
                content: "https://source.unsplash.com/random/400x300/?christmas,1",
                text: "¬°Comienza la cuenta atr√°s para Navidad! Hoy te regalamos esta imagen navide√±a para alegrar tu d√≠a."
            },
            2: {
                title: "D√≠a 2 - Villancico",
                type: "audio",
                content: musicBaseURL + "Yo%20Quiero%20-%20A%20New%20World%20(Piano%20Version).mp3",
                text: "Disfruta de esta hermosa versi√≥n en piano de 'Yo Quiero - A New World'."
            },
            3: {
                title: "D√≠a 3 - Chiste Navide√±o",
                type: "text",
                content: "¬øQu√© le dice un √°rbol a otro √°rbol? ¬°Qu√© hojas de verte!",
                text: "Esperamos que este chiste te haya sacado una sonrisa. ¬°Feliz d√≠a!"
            },
            4: {
                title: "D√≠a 4 - Imagen Festiva",
                type: "image",
                content: "https://source.unsplash.com/random/400x300/?christmas,4",
                text: "Un momento m√°gico navide√±o para alegrar tu d√≠a."
            },
            5: {
                title: "D√≠a 5 - Canci√≥n Alegre",
                type: "audio",
                content: musicBaseURL + "Yo%20Quiero%20-%20A%20New%20World.mp3",
                text: "Escucha la versi√≥n completa de 'Yo Quiero - A New World'."
            },
            6: {
                title: "D√≠a 6 - Acertijo",
                type: "text",
                content: "¬øQu√© es lo que siempre viene en diciembre pero nunca en enero? La letra D.",
                text: "¬øAdivinaste el acertijo? ¬°Esperamos que s√≠!"
            },
            7: {
                title: "D√≠a 7 - Decoraci√≥n Navide√±a",
                type: "image",
                content: "https://source.unsplash.com/random/400x300/?christmas,7",
                text: "Insp√≠rate con esta decoraci√≥n navide√±a para tu hogar."
            },
            8: {
                title: "D√≠a 8 - M√∫sica Relajante",
                type: "audio",
                content: musicBaseURL + "Yo%20Quiero%20-%20A%20New%20World%20-Versi√≥n%20Instrumental.mp3",
                text: "Disfruta de la versi√≥n instrumental de 'Yo Quiero - A New World'."
            },
            9: {
                title: "D√≠a 9 - Curiosidad Navide√±a",
                type: "text",
                content: "¬øSab√≠as que la tradici√≥n del √°rbol de Navidad se origin√≥ en Alemania en el siglo XVI?",
                text: "Una curiosidad navide√±a para compartir con tus seres queridos."
            },
            10: {
                title: "D√≠a 10 - Paisaje Invernal",
                type: "image",
                content: "https://source.unsplash.com/random/400x300/?winter,10",
                text: "Disfruta de este hermoso paisaje invernal."
            },
            11: {
                title: "D√≠a 11 - Villancico Animado",
                type: "audio",
                content: musicBaseURL + "Yo%20Quiero%20-%20A%20New%20World%20-%20Versi√≥n%20Karaoke.mp3",
                text: "¬°Es hora de cantar! Disfruta de la versi√≥n karaoke de 'Yo Quiero - A New World'."
            },
            12: {
                title: "D√≠a 12 - Refr√°n Navide√±o",
                type: "text",
                content: "Hasta los gatos se visten de gala en Nochebuena.",
                text: "Un refr√°n tradicional para reflexionar en estas fechas."
            },
            13: {
                title: "D√≠a 13 - Luces Navide√±as",
                type: "image",
                content: "https://source.unsplash.com/random/400x300/?christmas-lights,13",
                text: "Las luces navide√±as siempre alegran cualquier lugar."
            },
            14: {
                title: "D√≠a 14 - M√∫sica Cl√°sica",
                type: "audio",
                content: musicBaseURL + "Gemini.mp3",
                text: "Disfruta de esta pieza musical especial."
            },
            15: {
                title: "D√≠a 15 - Dato Curioso",
                type: "text",
                content: "En Finlandia, la Nochebuena es el d√≠a m√°s importante de la Navidad.",
                text: "Cada pa√≠s tiene sus propias tradiciones navide√±as."
            },
            16: {
                title: "D√≠a 16 - Regalos Navide√±os",
                type: "image",
                content: "https://source.unsplash.com/random/400x300/?gifts,16",
                text: "Los regalos son una parte importante de la magia navide√±a."
            },
            17: {
                title: "D√≠a 17 - Canci√≥n Festiva",
                type: "audio",
                content: musicBaseURL + "Tauro.mp3",
                text: "Una canci√≥n festiva para animar tu d√≠a."
            },
            18: {
                title: "D√≠a 18 - Pensamiento Navide√±o",
                type: "text",
                content: "La Navidad no es un momento ni una temporada, sino un estado de la mente.",
                text: "Un pensamiento profundo sobre el verdadero significado de la Navidad."
            },
            19: {
                title: "D√≠a 19 - Comida Navide√±a",
                type: "image",
                content: "https://source.unsplash.com/random/400x300/?christmas-food,19",
                text: "La comida navide√±a es una de las mejores partes de estas fiestas."
            },
            20: {
                title: "D√≠a 20 - Villancico Tradicional",
                type: "audio",
                content: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-7.mp3",
                text: "Un villancico tradicional para recordar las navidades de anta√±o."
            },
            21: {
                title: "D√≠a 21 - Cita Navide√±a",
                type: "text",
                content: "La mejor manera de spreadir el esp√≠ritu navide√±o es cantando fuerte para que todos lo oigan.",
                text: "- El Grinch (c√≥mo el Grinch rob√≥ la Navidad)"
            },
            22: {
                title: "D√≠a 22 - Decoraci√≥n Creativa",
                type: "image",
                content: "https://source.unsplash.com/random/400x300/?christmas-decoration,22",
                text: "Ideas creativas para decorar tu hogar estas navidades."
            },
            23: {
                title: "D√≠a 23 - M√∫sica para Celebrar",
                type: "audio",
                content: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3",
                text: "M√∫sica perfecta para celebrar con familia y amigos."
            },
            24: {
                title: "¬°Nochebuena!",
                type: "special-audio",
                content: musicBaseURL + "Yo%20Quiero%20-%20A%20New%20World.mp3",
                text: "¬°Feliz Nochebuena! Disfruta de todas las versiones de 'Yo Quiero - A New World' en este d√≠a especial."
            },
            25: {
                title: "¬°Feliz Navidad!",
                type: "text",
                content: "üéÑ ¬°Feliz Navidad! üéÖ",
                text: "Que este d√≠a est√© lleno de amor, alegr√≠a y momentos especiales con tus seres queridos."
            },
            26: {
                title: "D√≠a 26 - D√≠a de San Esteban",
                type: "text",
                content: "En muchos pa√≠ses, hoy se celebra el D√≠a de San Esteban.",
                text: "Es un d√≠a para descansar y disfrutar de los regalos recibidos."
            },
            27: {
                title: "D√≠a 27 - Preparando el A√±o Nuevo",
                type: "image",
                content: "https://source.unsplash.com/random/400x300/?new-year,27",
                text: "Ya se acerca el A√±o Nuevo, ¬°prep√°rate para celebrar!"
            },
            28: {
                title: "D√≠a 28 - Prop√≥sitos",
                type: "text",
                content: "¬øYa tienes tus prop√≥sitos para el pr√≥ximo a√±o?",
                text: "Es un buen momento para reflexionar sobre lo que quieres lograr."
            },
            29: {
                title: "D√≠a 29 - Despedida",
                type: "audio",
                content: musicBaseURL + "Gemini.mp3",
                text: "Disfruta de esta melod√≠a mientras nos despedimos del a√±o."
            },
            30: {
                title: "D√≠a 30 - √öltimo d√≠a del a√±o",
                type: "text",
                content: "¬°Ma√±ana es Nochevieja!",
                text: "Prep√°rate para despedir el a√±o por todo lo alto."
            },
            31: {
                title: "¬°Feliz A√±o Nuevo!",
                type: "text",
                content: "üéÜ ¬°Feliz A√±o Nuevo! üéá",
                text: "Que el pr√≥ximo a√±o est√© lleno de bendiciones, salud y prosperidad."
            },
            "1.1": {
                title: "¬°Feliz A√±o Nuevo 2025!",
                type: "text",
                content: "üéâ ¬°Feliz A√±o Nuevo! üéä",
                text: "¬°Que todos tus deseos se cumplan en este nuevo a√±o!"
            },
            "2.1": {
                title: "2 de Enero",
                type: "text",
                content: "Seguimos disfrutando de las fiestas",
                text: "Aprovecha estos d√≠as de descanso y alegr√≠a."
            },
            "3.1": {
                title: "3 de Enero",
                type: "text",
                content: "Preparando la llegada de los Reyes Magos",
                text: "¬øYa has escrito tu carta a los Reyes Magos?"
            },
            "4.1": {
                title: "4 de Enero",
                type: "text",
                content: "Faltan pocos d√≠as para Reyes",
                text: "La emoci√≥n va en aumento..."
            },
            "5.1": {
                title: "5 de Enero",
                type: "text",
                content: "¬°Noche de Reyes!",
                text: "Esta noche los Reyes Magos visitan todas las casas."
            },
            "6.1": {
                title: "¬°Feliz D√≠a de Reyes!",
                type: "text",
                content: "üéÅ ¬°Feliz D√≠a de Reyes! üëë",
                text: "Que los Reyes Magos te traigan muchos regalos y alegr√≠a."
            },
            "7.1": {
                title: "√öltimo d√≠a del calendario",
                type: "text",
                content: "Fin de las fiestas navide√±as",
                text: "Esperamos que hayas disfrutado de este calendario. ¬°Hasta el pr√≥ximo a√±o!"
            }
        };

        // Elementos DOM
        const calendarEl = document.getElementById('calendar');
        const modalEl = document.getElementById('modal');
        const modalTitleEl = document.getElementById('modalTitle');
        const modalContentEl = document.getElementById('modalContent');
        const closeModalEl = document.getElementById('closeModal');
        const playMusicBtn = document.getElementById('playMusic');
        const stopMusicBtn = document.getElementById('stopMusic');
        const countdownToCalendarEl = document.getElementById('countdownToCalendar');
        const countdownToHolidaysEl = document.getElementById('countdownToHolidays');
        const calendarContainerEl = document.getElementById('calendarContainer');
        const daysToCalendarEl = document.getElementById('daysToCalendar');
        const hoursToCalendarEl = document.getElementById('hoursToCalendar');
        const minutesToCalendarEl = document.getElementById('minutesToCalendar');
        const secondsToCalendarEl = document.getElementById('secondsToCalendar');
        const messageToCalendarEl = document.getElementById('messageToCalendar');
        const daysToChristmasEl = document.getElementById('daysToChristmas');
        const daysToNewYearEl = document.getElementById('daysToNewYear');
        const daysToReyesEl = document.getElementById('daysToReyes');
        const utcTimeDisplayEl = document.getElementById('utcTimeDisplay');
        const localTimeInfoEl = document.getElementById('localTimeInfo');
        const holidaysTimeInfoEl = document.getElementById('holidaysTimeInfo');
        const currentUTCDayEl = document.getElementById('currentUTCDay');
        const specialMessagesEl = document.getElementById('specialMessages');
        const mainTitleEl = document.getElementById('mainTitle');
        const mainSubtitleEl = document.getElementById('mainSubtitle');
        const mainFooterEl = document.getElementById('mainFooter');
        const holidaysTitleEl = document.getElementById('holidaysTitle');
        const holidaysMessageEl = document.getElementById('holidaysMessage');

        // Variables para el control de la cuenta regresiva
        let lastSeconds = {};
        let countdownInterval;

        // Audio para la m√∫sica de fondo
        const backgroundMusic = new Audio(musicBaseURL + "La%20Magia%20de%20la%20Estrella%20Polar.mp3");
        backgroundMusic.loop = true;

        // Obtener fecha UTC actual
        function getUTCDate() {
            const now = new Date();
            return new Date(Date.UTC(
                now.getUTCFullYear(),
                now.getUTCMonth(),
                now.getUTCDate(),
                now.getUTCHours(),
                now.getUTCMinutes(),
                now.getUTCSeconds()
            ));
        }

        // Actualizar display de hora UTC
        function updateUTCTimeDisplay() {
            const now = getUTCDate();
            const utcTimeString = now.toUTCString();
            utcTimeDisplayEl.textContent = `Hora UTC actual: ${utcTimeString}`;
            
            // Actualizar tambi√©n el d√≠a UTC actual en el calendario
            if (currentUTCDayEl) {
                currentUTCDayEl.textContent = now.getUTCDate() + '/' + (now.getUTCMonth() + 1);
            }
        }

        // Formatear n√∫meros a 2 d√≠gitos
        function formatTime(number) {
            return number.toString().padStart(2, '0');
        }

        // Efecto flash cuando cambia un n√∫mero
        function flashElement(element) {
            element.classList.add('countdown-flash');
            setTimeout(() => {
                element.classList.remove('countdown-flash');
            }, 500);
        }

        // Fecha actual en UTC
        const todayUTC = getUTCDate();
        const currentUTCDay = todayUTC.getUTCDate();
        const currentUTCMonth = todayUTC.getUTCMonth(); // 0 = Enero, 11 = Diciembre
        const currentUTCYear = todayUTC.getUTCFullYear();

        // Fechas importantes en UTC
        const calendarStartDateUTC = new Date(Date.UTC(currentUTCYear, 11, 1)); // 1 de diciembre UTC
        const calendarEndDateUTC = new Date(Date.UTC(currentUTCYear + 1, 0, 7)); // 7 de enero UTC del pr√≥ximo a√±o
        const christmasDateUTC = new Date(Date.UTC(currentUTCYear, 11, 25)); // 25 de diciembre UTC
        const newYearDateUTC = new Date(Date.UTC(currentUTCYear + 1, 0, 1)); // 1 de enero del pr√≥ximo a√±o UTC
        const reyesDateUTC = new Date(Date.UTC(currentUTCYear + 1, 0, 6)); // 6 de enero del pr√≥ximo a√±o UTC

        // Cargar d√≠as abiertos desde localStorage
        let openedDays = JSON.parse(localStorage.getItem('adventCalendarOpenedDays')) || [];

        // Aplicar temas especiales seg√∫n la fecha
        function applySpecialThemes() {
            const body = document.body;
            body.classList.remove('christmas-theme', 'newyear-theme', 'reyes-theme');
            
            // Resetear todos los elementos
            mainTitleEl.innerHTML = 'üéÑ Calendario de Adviento M√°gico üéÖ';
            mainSubtitleEl.textContent = '¬°Abre una sorpresa cada d√≠a hasta Navidad y m√°s all√°!';
            mainFooterEl.innerHTML = '<p>Disfruta de cada d√≠a con una sorpresa √∫nica. ¬°Felices fiestas! üéÅ</p>';
            holidaysTitleEl.textContent = '¬°Cuenta atr√°s para las fiestas! (UTC)';
            holidaysMessageEl.textContent = '¬°Disfruta cada d√≠a del calendario!';

            // Mostrar mensajes especiales
            specialMessagesEl.innerHTML = '';

            // Navidad (25 de diciembre)
            if (currentUTCMonth === 11 && currentUTCDay === 25) {
                body.classList.add('christmas-theme');
                mainTitleEl.innerHTML = 'üéÖ ¬°FELIZ NAVIDAD! üéÑ';
                mainSubtitleEl.textContent = 'Que este d√≠a est√© lleno de amor, alegr√≠a y momentos especiales';
                mainFooterEl.innerHTML = '<p>¬°Feliz Navidad! Que la magia de esta fecha llene tu hogar de alegr√≠a üéÅ</p>';
                holidaysTitleEl.textContent = '¬°HOY ES NAVIDAD! üéÑ';
                holidaysMessageEl.textContent = '¬°Disfruta de este d√≠a m√°gico con tus seres queridos!';
                specialMessagesEl.innerHTML = '<div class="special-message christmas-message">üéÑ ¬°FELIZ NAVIDAD! üéÖ</div>';
                createFireworks();
            }
            // A√±o Nuevo (1 de enero)
            else if (currentUTCMonth === 0 && currentUTCDay === 1) {
                body.classList.add('newyear-theme');
                mainTitleEl.innerHTML = 'üéÜ ¬°FELIZ A√ëO NUEVO! üéá';
                mainSubtitleEl.textContent = 'Que el nuevo a√±o traiga bendiciones, salud y prosperidad';
                mainFooterEl.innerHTML = '<p>¬°Feliz A√±o Nuevo! Que todos tus sue√±os se hagan realidad en el ' + (currentUTCYear + 1) + ' ‚ú®</p>';
                holidaysTitleEl.textContent = '¬°FELIZ A√ëO NUEVO! üéâ';
                holidaysMessageEl.textContent = '¬°Que este nuevo a√±o est√© lleno de alegr√≠as y √©xitos!';
                specialMessagesEl.innerHTML = '<div class="special-message newyear-message">üéÜ ¬°FELIZ A√ëO NUEVO! üéá</div>';
                createFireworks();
            }
            // Reyes Magos (6 de enero)
            else if (currentUTCMonth === 0 && currentUTCDay === 6) {
                body.classList.add('reyes-theme');
                mainTitleEl.innerHTML = 'üëë ¬°FELIZ D√çA DE REYES! üéÅ';
                mainSubtitleEl.textContent = 'Que los Reyes Magos te traigan muchos regalos y alegr√≠a';
                mainFooterEl.innerHTML = '<p>¬°Feliz D√≠a de Reyes! Que la magia de la ilusi√≥n nunca desaparezca ‚ú®</p>';
                holidaysTitleEl.textContent = '¬°FELIZ D√çA DE REYES! üëë';
                holidaysMessageEl.textContent = '¬°Disfruta de los regalos y la compa√±√≠a de tus seres queridos!';
                specialMessagesEl.innerHTML = '<div class="special-message reyes-message">üëë ¬°FELIZ D√çA DE REYES! üéÅ</div>';
                createFireworks();
            }
        }

        // Inicializar la aplicaci√≥n
        function initApp() {
            // Actualizar display de hora UTC
            updateUTCTimeDisplay();
            setInterval(updateUTCTimeDisplay, 1000);

            // Aplicar temas especiales
            applySpecialThemes();

            // Verificar si estamos en el per√≠odo activo del calendario (1/12 al 7/01)
            const isActivePeriod = (currentUTCMonth === 11 && currentUTCDay >= 1) || 
                                 (currentUTCMonth === 0 && currentUTCDay <= 7);

            if (isActivePeriod) {
                // Mostrar calendario y contador de fiestas
                countdownToCalendarEl.style.display = 'none';
                calendarContainerEl.style.display = 'block';
                countdownToHolidaysEl.style.display = 'block';
                initCalendar();
                updateHolidaysCountdown();
                setInterval(updateHolidaysCountdown, 1000);
            } else if (currentUTCMonth === 11 && currentUTCDay < 1) {
                // Mostrar contador hasta diciembre UTC
                countdownToCalendarEl.style.display = 'block';
                calendarContainerEl.style.display = 'none';
                countdownToHolidaysEl.style.display = 'none';
                updateCalendarCountdown();
                setInterval(updateCalendarCountdown, 1000);
            } else {
                // Fuera del per√≠odo activo
                countdownToCalendarEl.style.display = 'none';
                calendarContainerEl.style.display = 'none';
                countdownToHolidaysEl.style.display = 'none';
                specialMessagesEl.innerHTML = '<div class="special-message">El calendario estar√° disponible del 1 de diciembre al 7 de enero</div>';
            }
        }

        // Actualizar contador hasta el calendario (UTC)
        function updateCalendarCountdown() {
            const nowUTC = getUTCDate();
            const timeRemaining = calendarStartDateUTC - nowUTC;
            
            if (timeRemaining <= 0) {
                // Ya es diciembre UTC, recargar para mostrar el calendario
                location.reload();
                return;
            }
            
            const days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeRemaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeRemaining % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeRemaining % (1000 * 60)) / 1000);
            
            // Aplicar efectos de cuenta regresiva
            if (lastSeconds.daysToCalendar !== days) {
                daysToCalendarEl.textContent = formatTime(days);
                flashElement(daysToCalendarEl);
                lastSeconds.daysToCalendar = days;
            }
            
            if (lastSeconds.hoursToCalendar !== hours) {
                hoursToCalendarEl.textContent = formatTime(hours);
                flashElement(hoursToCalendarEl);
                lastSeconds.hoursToCalendar = hours;
            }
            
            if (lastSeconds.minutesToCalendar !== minutes) {
                minutesToCalendarEl.textContent = formatTime(minutes);
                flashElement(minutesToCalendarEl);
                lastSeconds.minutesToCalendar = minutes;
            }
            
            if (lastSeconds.secondsToCalendar !== seconds) {
                secondsToCalendarEl.textContent = formatTime(seconds);
                flashElement(secondsToCalendarEl);
                lastSeconds.secondsToCalendar = seconds;
            }
            
            // Actualizar mensaje
            if (days === 0) {
                messageToCalendarEl.textContent = "¬°El calendario se activar√° hoy!";
            } else if (days === 1) {
                messageToCalendarEl.textContent = "¬°Solo 1 d√≠a para que comience el calendario!";
            } else {
                messageToCalendarEl.textContent = `El calendario se activar√° el 1 de diciembre (en ${days} d√≠as)`;
            }
        }

        // Actualizar contador hasta Navidad, A√±o Nuevo y Reyes (UTC)
        function updateHolidaysCountdown() {
            const nowUTC = getUTCDate();
            
            // D√≠as hasta Navidad
            const timeToChristmas = christmasDateUTC - nowUTC;
            const daysToChristmas = Math.ceil(timeToChristmas / (1000 * 60 * 60 * 24));
            
            // D√≠as hasta A√±o Nuevo
            const timeToNewYear = newYearDateUTC - nowUTC;
            const daysToNewYear = Math.ceil(timeToNewYear / (1000 * 60 * 60 * 24));
            
            // D√≠as hasta Reyes
            const timeToReyes = reyesDateUTC - nowUTC;
            const daysToReyes = Math.ceil(timeToReyes / (1000 * 60 * 60 * 24));
            
            // Aplicar efectos de cuenta regresiva
            if (lastSeconds.daysToChristmas !== daysToChristmas) {
                daysToChristmasEl.textContent = formatTime(Math.max(0, daysToChristmas));
                if (daysToChristmas >= 0) flashElement(daysToChristmasEl);
                lastSeconds.daysToChristmas = daysToChristmas;
            }
            
            if (lastSeconds.daysToNewYear !== daysToNewYear) {
                daysToNewYearEl.textContent = formatTime(Math.max(0, daysToNewYear));
                if (daysToNewYear >= 0) flashElement(daysToNewYearEl);
                lastSeconds.daysToNewYear = daysToNewYear;
            }
            
            if (lastSeconds.daysToReyes !== daysToReyes) {
                daysToReyesEl.textContent = formatTime(Math.max(0, daysToReyes));
                if (daysToReyes >= 0) flashElement(daysToReyesEl);
                lastSeconds.daysToReyes = daysToReyes;
            }
        }

        // Inicializar el calendario
        function initCalendar() {
            // A√±adir t√≠tulo y d√≠as de la semana
            calendarEl.innerHTML = '<div class="calendar-title">Diciembre ' + currentUTCYear + ' - Enero ' + (currentUTCYear + 1) + '</div>';
            const dayLabels = ['Dom', 'Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b'];
            dayLabels.forEach(label => {
                const labelEl = document.createElement('div');
                labelEl.className = 'day-label';
                labelEl.textContent = label;
                calendarEl.appendChild(labelEl);
            });

            // Calcular el d√≠a de la semana del 1 de diciembre
            const firstDay = new Date(Date.UTC(currentUTCYear, 11, 1)).getUTCDay();
            
            // A√±adir espacios vac√≠os para alinear el calendario
            for (let i = 0; i < firstDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'day disabled';
                calendarEl.appendChild(emptyDay);
            }

            // A√±adir los d√≠as del per√≠odo activo (1/12 al 7/01)
            const startDate = new Date(Date.UTC(currentUTCYear, 11, 1));
            const endDate = new Date(Date.UTC(currentUTCYear + 1, 0, 7));
            
            let currentDate = new Date(startDate);
            let dayCount = 0;
            
            while (currentDate <= endDate) {
                const day = currentDate.getUTCDate();
                const month = currentDate.getUTCMonth();
                const year = currentDate.getUTCFullYear();
                
                const dayEl = document.createElement('div');
                dayEl.className = 'day';
                
                // Para enero, mostrar "Ene" en el contenido
                const monthLabel = month === 11 ? 'Dic' : 'Ene';
                const displayDay = month === 11 ? day : day + '.Ene';
                
                dayEl.innerHTML = `
                    <div class="day-number">${displayDay}</div>
                    <div class="day-content">${getDayContent(day, month)}</div>
                `;
                
                // Usar clave √∫nica que incluya mes y d√≠a
                const dayKey = month === 11 ? day : day + '.' + (month + 1);
                dayEl.dataset.day = dayKey;

                // Verificar si el d√≠a est√° disponible (d√≠as pasados o actual)
                const isPastOrCurrent = (month === 11 && day <= currentUTCDay) || 
                                      (month === 0 && day <= currentUTCDay && currentUTCMonth === 0);
                
                if (isPastOrCurrent) {
                    dayEl.addEventListener('click', () => openDay(dayKey, month));
                    
                    // Marcar como hoy si es el d√≠a actual
                    if (day === currentUTCDay && month === currentUTCMonth) {
                        dayEl.classList.add('today');
                    }
                    
                    // Marcar como abierto si ya fue abierto antes
                    if (openedDays.includes(dayKey)) {
                        dayEl.classList.add('opened');
                    }
                } else {
                    // D√≠as futuros
                    dayEl.classList.add('disabled');
                }

                // A√±adir clases especiales para d√≠as festivos
                if ((month === 11 && day === 24) || (month === 11 && day === 25)) {
                    dayEl.classList.add('christmas');
                    dayEl.classList.add('special');
                } else if ((month === 0 && day === 1)) {
                    dayEl.classList.add('new-year');
                    dayEl.classList.add('special');
                } else if ((month === 0 && day === 6)) {
                    dayEl.classList.add('reyes');
                    dayEl.classList.add('special');
                } else if (dayKey === '7.1') {
                    dayEl.classList.add('special');
                }

                calendarEl.appendChild(dayEl);
                
                // Siguiente d√≠a
                currentDate.setUTCDate(currentDate.getUTCDate() + 1);
                dayCount++;
            }
        }

        // Obtener contenido para mostrar en el d√≠a
        function getDayContent(day, month) {
            const dayKey = month === 11 ? day : day + '.' + (month + 1);
            
            if (month === 11 && day === 24) return "Nochebuena";
            if (month === 11 && day === 25) return "Navidad";
            if (month === 0 && day === 1) return "A√±o Nuevo";
            if (month === 0 && day === 6) return "Reyes Magos";
            if (dayKey === '7.1') return "Fin del calendario";
            
            if (dailyContent[dayKey]) {
                if (dailyContent[dayKey].type === "audio") return "üéµ M√∫sica";
                if (dailyContent[dayKey].type === "image") return "üñºÔ∏è Imagen";
                if (dailyContent[dayKey].type === "text") return "üìù Texto";
                if (dailyContent[dayKey].type === "special-audio") return "üé∂ M√∫sica Especial";
            }
            return "";
        }

        // Abrir un d√≠a del calendario
        function openDay(dayKey, month) {
            const content = dailyContent[dayKey];
            if (!content) return;

            // Guardar en localStorage que este d√≠a fue abierto
            if (!openedDays.includes(dayKey)) {
                openedDays.push(dayKey);
                localStorage.setItem('adventCalendarOpenedDays', JSON.stringify(openedDays));
            }

            // Marcar el d√≠a como abierto
            const dayEl = document.querySelector(`.day[data-day="${dayKey}"]`);
            if (dayEl) {
                dayEl.classList.add('opened');
            }

            // Mostrar el contenido en el modal
            modalTitleEl.textContent = content.title;
            
            let contentHTML = '';
            if (content.type === 'image') {
                contentHTML = `
                    <img src="${content.content}" alt="Imagen del d√≠a ${dayKey}" class="modal-image">
                    <p class="modal-text">${content.text}</p>
                `;
            } else if (content.type === 'audio') {
                contentHTML = `
                    <audio controls class="modal-audio">
                        <source src="${content.content}" type="audio/mpeg">
                        Tu navegador no soporta el elemento de audio.
                    </audio>
                    <p class="modal-text">${content.text}</p>
                `;
            } else if (content.type === 'text') {
                contentHTML = `
                    <div class="modal-text" style="font-size: 1.5rem; font-weight: bold; margin: 20px 0;">
                        "${content.content}"
                    </div>
                    <p class="modal-text">${content.text}</p>
                `;
            } else if (content.type === 'special-audio') {
                contentHTML = `
                    <p class="modal-text">${content.text}</p>
                    <div class="audio-options">
                        <button class="audio-option" onclick="playAudio('${musicBaseURL + "Yo%20Quiero%20-%20A%20New%20World%20(Piano%20Version).mp3"}')">
                            Versi√≥n Piano
                        </button>
                        <button class="audio-option" onclick="playAudio('${musicBaseURL + "Yo%20Quiero%20-%20A%20New%20World.mp3"}')">
                            Versi√≥n Completa
                        </button>
                        <button class="audio-option" onclick="playAudio('${musicBaseURL + "Yo%20Quiero%20-%20A%20New%20World%20-Versi√≥n%20Instrumental.mp3"}')">
                            Versi√≥n Instrumental
                        </button>
                        <button class="audio-option" onclick="playAudio('${musicBaseURL + "Yo%20Quiero%20-%20A%20New%20World%20-%20Versi√≥n%20Karaoke.mp3"}')">
                            Versi√≥n Karaoke
                        </button>
                    </div>
                    <audio id="specialAudio" controls class="modal-audio" style="display: none;">
                        Tu navegador no soporta el elemento de audio.
                    </audio>
                `;
            }

            modalContentEl.innerHTML = contentHTML;
            modalEl.style.display = 'flex';

            // Efectos especiales para d√≠as festivos
            if (dayKey === '24' || dayKey === '25' || dayKey === '1.1' || dayKey === '6.1') {
                createFireworks();
            }
        }

        // Funci√≥n para reproducir audio especial
        function playAudio(url) {
            const audioElement = document.getElementById('specialAudio');
            audioElement.src = url;
            audioElement.style.display = 'block';
            audioElement.play();
        }

        // Cerrar el modal
        function closeModal() {
            modalEl.style.display = 'none';
            // Detener cualquier audio que est√© reproduci√©ndose
            const audios = document.querySelectorAll('audio');
            audios.forEach(audio => {
                audio.pause();
                audio.currentTime = 0;
            });
        }

        // Reproducir m√∫sica de fondo
        function playBackgroundMusic() {
            backgroundMusic.play().catch(e => {
                console.log("La reproducci√≥n autom√°tica fue bloqueada. Haz clic en reproducir.");
                alert("Para reproducir la m√∫sica, haz clic en el bot√≥n 'Reproducir M√∫sica Navide√±a'.");
            });
        }

        // Detener m√∫sica de fondo
        function stopBackgroundMusic() {
            backgroundMusic.pause();
            backgroundMusic.currentTime = 0;
        }

        // Crear efecto de nieve
        function createSnowflakes() {
            const snowContainer = document.body;
            const snowflakeCount = 100;

            for (let i = 0; i < snowflakeCount; i++) {
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                snowflake.innerHTML = '‚ùÑ';
                snowflake.style.left = `${Math.random() * 100}vw`;
                snowflake.style.animationDuration = `${Math.random() * 5 + 5}s`;
                snowflake.style.opacity = Math.random();
                snowflake.style.fontSize = `${Math.random() * 15 + 10}px`;
                snowflake.style.animationDelay = `${Math.random() * 5}s`;
                
                snowContainer.appendChild(snowflake);
            }
        }

        // Crear efecto de fuegos artificiales
        function createFireworks() {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff', '#ffffff'];
            
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const firework = document.createElement('div');
                    firework.className = 'firework';
                    firework.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    firework.style.left = `${Math.random() * 100}vw`;
                    firework.style.top = `${Math.random() * 100}vh`;
                    
                    document.body.appendChild(firework);
                    
                    // Animaci√≥n
                    firework.animate([
                        { transform: 'scale(0)', opacity: 1 },
                        { transform: `scale(${Math.random() * 3 + 1})`, opacity: 0 }
                    ], {
                        duration: 1000 + Math.random() * 1000,
                        easing: 'ease-out'
                    });
                    
                    // Eliminar despu√©s de la animaci√≥n
                    setTimeout(() => {
                        firework.remove();
                    }, 2000);
                }, i * 100);
            }
        }

        // Event listeners
        closeModalEl.addEventListener('click', closeModal);
        modalEl.addEventListener('click', (e) => {
            if (e.target === modalEl) closeModal();
        });
        playMusicBtn.addEventListener('click', playBackgroundMusic);
        stopMusicBtn.addEventListener('click', stopBackgroundMusic);

        // Inicializar la aplicaci√≥n
        initApp();
        createSnowflakes();

        // Mensaje de consola divertido
        console.log(`
        üéÑ ¬°Feliz Navidad! üéÖ
        Este calendario de adviento fue creado con ‚ù§Ô∏è
        ¬°Disfruta de cada d√≠a con una sorpresa √∫nica!
        `);
    </script>
    <!-- Footer -->
    <div id="footer"></div>
<script src="preloader.js"></script>
</body>
</html>
